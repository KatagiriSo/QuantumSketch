/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/Config.ts":
/*!***********************!*\
  !*** ./src/Config.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config)\n/* harmony export */ });\nvar config = {\n    /// lattice size\n    scale: 15,\n    log: \"VER\",\n};\n\n\n//# sourceURL=webpack://rdfeyn/./src/Config.ts?");

/***/ }),

/***/ "./src/Core/Elem.ts":
/*!**************************!*\
  !*** ./src/Core/Elem.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getElemID: () => (/* binding */ getElemID)\n/* harmony export */ });\nvar elemIDCounter = 0;\n// ElemIDCounter is a global variable that is used to generate unique IDs for\nfunction getElemID() {\n    var id = \"\".concat(elemIDCounter);\n    elemIDCounter++;\n    return id;\n}\n\n\n//# sourceURL=webpack://rdfeyn/./src/Core/Elem.ts?");

/***/ }),

/***/ "./src/Core/Group.ts":
/*!***************************!*\
  !*** ./src/Core/Group.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Group: () => (/* binding */ Group),\n/* harmony export */   isGroup: () => (/* binding */ isGroup)\n/* harmony export */ });\n/* harmony import */ var _Elem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Elem */ \"./src/Core/Elem.ts\");\n/* harmony import */ var _Loop__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Loop */ \"./src/Core/Loop.ts\");\n/* harmony import */ var _MyString__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MyString */ \"./src/Core/MyString.ts\");\n/* harmony import */ var _Vector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Vector */ \"./src/Core/Vector.ts\");\n\n\n\n\nvar Group = /** @class */ (function () {\n    function Group(elements) {\n        this.shape = \"Group\";\n        this.elements = [];\n        this.id = (0,_Elem__WEBPACK_IMPORTED_MODULE_0__.getElemID)();\n        this.elements = elements;\n    }\n    Group.prototype.first = function () {\n        if (this.elements.length === 0) {\n            return undefined;\n        }\n        return this.elements[0];\n    };\n    Group.prototype.formalDistance = function (point) {\n        if (this.elements.length === 0) {\n            return Infinity;\n        }\n        var minDistance = Infinity;\n        for (var _i = 0, _a = this.elements; _i < _a.length; _i++) {\n            var elem = _a[_i];\n            var distance = elem.formalDistance(point);\n            if (distance < minDistance) {\n                minDistance = distance;\n            }\n        }\n        return minDistance;\n    };\n    Group.prototype.move = function (delta) {\n        for (var _i = 0, _a = this.elements; _i < _a.length; _i++) {\n            var elem = _a[_i];\n            elem.move(delta);\n        }\n    };\n    Group.prototype.copy = function () {\n        var elementsCopy = [];\n        for (var _i = 0, _a = this.elements; _i < _a.length; _i++) {\n            var elem = _a[_i];\n            elementsCopy.push(elem.copy());\n        }\n        return new Group(elementsCopy);\n    };\n    Group.prototype.moveAbsolute = function (location) {\n        if (this.elements.length === 0) {\n            return;\n        }\n        var first = this.elements[0];\n        if ((0,_Vector__WEBPACK_IMPORTED_MODULE_3__.isVector)(first)) {\n            var delta = location.minus(first);\n            this.move(delta);\n        }\n        else if ((0,_Loop__WEBPACK_IMPORTED_MODULE_1__.isLoop)(first)) {\n            var delta = location.minus(first.origin);\n            this.move(delta);\n        }\n        else if ((0,_MyString__WEBPACK_IMPORTED_MODULE_2__.isString)(first)) {\n            var delta = location.minus(first.origin);\n            this.move(delta);\n        }\n        else if (isGroup(first)) {\n            first.moveAbsolute(location);\n        }\n        else {\n        }\n    };\n    Group.prototype.description = function () {\n        var desc = \"\".concat(this.shape, \" id:\").concat(this.id, \" elements:\");\n        for (var _i = 0, _a = this.elements; _i < _a.length; _i++) {\n            var elem = _a[_i];\n            desc += elem.description() + \" \";\n        }\n        return desc;\n    };\n    Group.prototype.save = function () {\n        var saveData = {};\n        saveData[\"id\"] = this.id;\n        saveData[\"shape\"] = this.shape;\n        saveData[\"elements\"] = [];\n        for (var _i = 0, _a = this.elements; _i < _a.length; _i++) {\n            var elem = _a[_i];\n            saveData[\"elements\"].push(elem.save());\n        }\n        return saveData;\n    };\n    return Group;\n}());\n\nfunction isGroup(elem) {\n    return elem.shape == \"Group\";\n}\n\n\n//# sourceURL=webpack://rdfeyn/./src/Core/Group.ts?");

/***/ }),

/***/ "./src/Core/Line.ts":
/*!**************************!*\
  !*** ./src/Core/Line.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Line: () => (/* binding */ Line),\n/* harmony export */   isLine: () => (/* binding */ isLine),\n/* harmony export */   makeLine: () => (/* binding */ makeLine)\n/* harmony export */ });\n/* harmony import */ var _Elem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Elem */ \"./src/Core/Elem.ts\");\n/* harmony import */ var _Vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Vector */ \"./src/Core/Vector.ts\");\n\n\n// wave https://stackoverflow.com/questions/29917446/drawing-sine-wave-in-canvas\n/**\n * A Line is a Elem that is a line.\n * It has a label, a style, and a labelDiff.\n * It can be rotated, and it can be toggled.\n * It can be copied, and it can be saved to a JSON object.\n * It can also be described as a string.\n */\nvar Line = /** @class */ (function () {\n    function Line(label, style) {\n        this.shape = \"Line\";\n        this.label = \"\";\n        this.style = \"normal\";\n        this.labelDiff = 0;\n        this.allow = true;\n        this.origin = new _Vector__WEBPACK_IMPORTED_MODULE_1__.Vector(0, 0);\n        this.to = new _Vector__WEBPACK_IMPORTED_MODULE_1__.Vector(0, 0);\n        this.id = (0,_Elem__WEBPACK_IMPORTED_MODULE_0__.getElemID)();\n        if (label) {\n            this.label = label;\n        }\n        if (style) {\n            this.style = style;\n        }\n    }\n    Line.prototype.save = function () {\n        var saveData = {};\n        saveData[\"id\"] = this.id;\n        saveData[\"label\"] = this.label;\n        saveData[\"style\"] = this.style;\n        saveData[\"allow\"] = this.allow;\n        saveData[\"origin\"] = this.origin.save();\n        saveData[\"to\"] = this.to.save();\n        return saveData;\n    };\n    Line.prototype.copy = function () {\n        var line = new Line();\n        line.label = this.label;\n        line.style = this.style;\n        line.labelDiff = line.labelDiff;\n        line.allow = this.allow;\n        line.origin = this.origin;\n        line.to = this.to;\n        return line;\n    };\n    Line.prototype.rotation = function (angle) {\n        var centerOrigin = this.center();\n        var unitVec = this.directionUnit();\n        var length = this.length();\n        var rotatedUnitVec = unitVec.rotation(angle);\n        this.origin = centerOrigin.add(rotatedUnitVec.multi(-length / 2));\n        this.to = centerOrigin.add(rotatedUnitVec.multi(length / 2));\n    };\n    Line.prototype.move = function (delta) {\n        this.origin = this.origin.add(delta);\n        this.to = this.to.add(delta);\n    };\n    Line.prototype.moveAbsolute = function (location) {\n        var length = this.length();\n        var unitVec = this.directionUnit();\n        this.origin = location.add(unitVec.multi(-length / 2));\n        this.to = location.add(unitVec.multi(+length / 2));\n    };\n    Line.prototype.length = function () {\n        return this.to.minus(this.origin).length();\n    };\n    Line.prototype.toggle = function () {\n        var o = this.origin;\n        this.origin = this.to;\n        this.to = o;\n    };\n    Line.prototype.direction = function () {\n        return this.to.minus(this.origin);\n    };\n    Line.prototype.directionUnit = function () {\n        return this.direction().multi(1 / this.length());\n    };\n    Line.prototype.addLoopOrigin = function (loop) {\n        loop.origin = this.origin.minus(this.directionUnit().multi(loop.radius));\n    };\n    Line.prototype.addLoopTo = function (loop) {\n        loop.origin = this.to.add(this.directionUnit().multi(loop.radius));\n    };\n    Line.prototype.between = function (loop1, loop2) {\n        this.to = loop1.origin.copy();\n        this.origin = loop2.origin.copy();\n        loop1.addLineTo(this);\n        loop2.addLineOrigin(this);\n    };\n    Line.prototype.center = function () {\n        return this.origin.add(this.to).multi(1 / 2);\n    };\n    Line.prototype.formalDistance = function (point) {\n        var vec1 = point.minus(this.origin);\n        var vec2 = point.minus(this.to);\n        // const cosTheta = vec1.prod(vec2)\n        if (Math.abs(vec1.length() + vec2.length() - this.length()) > 10) {\n            return Infinity;\n        }\n        var perp_unit = this.directionUnit().rotation(Math.PI / 2);\n        var diff = point.minus(this.origin);\n        var perpLength = Math.abs(diff.prod(perp_unit));\n        return perpLength;\n        // let toLength = this.to.minus(point).length()\n        // let originLength = this.origin.minus(point).length()\n        // if (toLength < originLength) {\n        //     if (toLength > 2) {\n        //         return toLength\n        //     }\n        //     return toLength + 1\n        // }\n        // if (originLength > 2) {\n        //     return originLength\n        // }\n        // return originLength + 1\n    };\n    Line.prototype.vector = function () {\n        return this.to.minus(this.origin);\n    };\n    Line.prototype.description = function () {\n        return \"\".concat(this.shape, \" id:\").concat(this.id, \" (\").concat(this.origin.x, \",\").concat(this.origin.y, \") -> (\").concat(this.to.x, \", \").concat(this.to.y, \") stayle:\").concat(this.style);\n    };\n    return Line;\n}());\n\nfunction isLine(elem) {\n    return elem.shape == \"Line\";\n}\nfunction makeLine(data) {\n    var _a, _b;\n    var shape = data[\"shape\"];\n    if (shape) {\n        return undefined;\n    }\n    var elm = new Line(undefined, undefined);\n    elm.id = data[\"id\"];\n    elm.label = data[\"label\"];\n    elm.style = data[\"style\"];\n    elm.allow = data[\"allow\"];\n    elm.labelDiff = data[\"labelDiff\"];\n    elm.origin = (_a = (0,_Vector__WEBPACK_IMPORTED_MODULE_1__.makeVector)(data[\"origin\"])) !== null && _a !== void 0 ? _a : new _Vector__WEBPACK_IMPORTED_MODULE_1__.Vector(0, 0);\n    elm.to = (_b = (0,_Vector__WEBPACK_IMPORTED_MODULE_1__.makeVector)(data[\"to\"])) !== null && _b !== void 0 ? _b : new _Vector__WEBPACK_IMPORTED_MODULE_1__.Vector(0, 0);\n    return elm;\n}\n\n\n//# sourceURL=webpack://rdfeyn/./src/Core/Line.ts?");

/***/ }),

/***/ "./src/Core/Loop.ts":
/*!**************************!*\
  !*** ./src/Core/Loop.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Loop: () => (/* binding */ Loop),\n/* harmony export */   isLoop: () => (/* binding */ isLoop),\n/* harmony export */   makeLoop: () => (/* binding */ makeLoop)\n/* harmony export */ });\n/* harmony import */ var _Elem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Elem */ \"./src/Core/Elem.ts\");\n/* harmony import */ var _Vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Vector */ \"./src/Core/Vector.ts\");\n\n\n/**\n * A Loop is a Line that is a loop.\n * It has a radius, and a begin and end angle.\n * It can be copied, and it can be saved to a JSON object.\n * It can also be described as a string.\n */\nvar Loop = /** @class */ (function () {\n    function Loop(label, origin) {\n        this.shape = \"Loop\";\n        this.style = \"normal\";\n        this.allow = false;\n        this.fill = false;\n        this.origin = new _Vector__WEBPACK_IMPORTED_MODULE_1__.Vector(0, 0);\n        this.radius = 1;\n        this.label = \"\";\n        this.labels = [];\n        this.loopBeginAngle = 0;\n        this.loopEndAngle = Math.PI * 2;\n        this.id = (0,_Elem__WEBPACK_IMPORTED_MODULE_0__.getElemID)();\n        if (label) {\n            this.label = label;\n        }\n        if (origin) {\n            this.origin = origin;\n        }\n    }\n    Loop.prototype.save = function () {\n        var saveData = {};\n        saveData[\"id\"] = this.id;\n        saveData[\"label\"] = this.label;\n        saveData[\"labels\"] = this.labels;\n        saveData[\"shape\"] = this.shape;\n        saveData[\"style\"] = this.style;\n        saveData[\"allow\"] = this.allow;\n        saveData[\"fill\"] = this.fill;\n        saveData[\"origin\"] = this.origin.save();\n        saveData[\"radius\"] = this.radius;\n        saveData[\"loopBeginAngle\"] = this.loopBeginAngle;\n        saveData[\"loopEndAngle\"] = this.loopEndAngle;\n        return saveData;\n    };\n    Loop.prototype.copy = function () {\n        var loop = new Loop();\n        loop.fill = this.fill;\n        loop.origin = this.origin;\n        loop.radius = this.radius;\n        loop.label = this.label;\n        loop.labels = this.labels;\n        loop.style = this.style;\n        loop.loopBeginAngle = this.loopBeginAngle;\n        loop.loopEndAngle = this.loopEndAngle;\n        return loop;\n    };\n    Loop.prototype.setLoopBeginAngle = function (angle) {\n        if (angle >= 2 * Math.PI)\n            angle -= 2 * Math.PI;\n        if (angle < 0.0)\n            angle += 2 * Math.PI;\n        this.loopBeginAngle = angle;\n    };\n    Loop.prototype.setLoopEndAngle = function (angle) {\n        if (angle >= 2 * Math.PI)\n            angle -= 2 * Math.PI;\n        if (angle < 0)\n            angle += 2 * Math.PI;\n        this.loopEndAngle = angle;\n    };\n    Loop.prototype.setRadius = function (radius) {\n        if (radius < 1)\n            radius = 1;\n        this.radius = radius;\n    };\n    Loop.prototype.move = function (delta) {\n        this.origin = this.origin.add(delta);\n    };\n    Loop.prototype.moveAbsolute = function (location) {\n        this.origin = location;\n    };\n    Loop.prototype.rotation = function (delta) {\n        this.setLoopBeginAngle(this.loopBeginAngle + delta);\n        this.setLoopEndAngle(this.loopEndAngle + delta);\n    };\n    Loop.prototype.addLineTo = function (line) {\n        line.to = this.origin.add((0,_Vector__WEBPACK_IMPORTED_MODULE_1__.direction)(line.origin, this.origin).unit().multi(this.radius));\n    };\n    Loop.prototype.addLineOrigin = function (line) {\n        line.origin = this.origin.add((0,_Vector__WEBPACK_IMPORTED_MODULE_1__.direction)(line.to, this.origin).unit().multi(this.radius));\n    };\n    Loop.prototype.addLoop = function (loop) {\n        loop.origin = this.origin.add((0,_Vector__WEBPACK_IMPORTED_MODULE_1__.direction)(loop.origin, this.origin).unit().multi(this.radius));\n    };\n    Loop.prototype.formalDistance = function (point) {\n        var length = this.origin.minus(point).length();\n        if (length < this.radius) {\n            return 0;\n        }\n        return Number.MAX_VALUE;\n    };\n    Loop.prototype.description = function () {\n        return \"\".concat(this.shape, \" id:\").concat(this.id, \" (\").concat(this.origin.x, \",\").concat(this.origin.y, \") radius = \").concat(this.radius, \" angle = (\").concat(this.loopBeginAngle * (360 / (2 * Math.PI)), \", \").concat(this.loopEndAngle * (360 / (2 * Math.PI)), \") stayle:\").concat(this.style);\n    };\n    return Loop;\n}());\n\nfunction isLoop(elem) {\n    return elem.shape == \"Loop\";\n}\nfunction makeLoop(data) {\n    var _a;\n    var shape = data[\"shape\"];\n    if (shape) {\n        return undefined;\n    }\n    var elm = new Loop(undefined, undefined);\n    elm.id = data[\"id\"];\n    elm.label = data[\"label\"];\n    elm.style = data[\"style\"];\n    elm.allow = data[\"allow\"];\n    elm.fill = data[\"fill\"];\n    elm.origin = (_a = (0,_Vector__WEBPACK_IMPORTED_MODULE_1__.makeVector)(data[\"origin\"])) !== null && _a !== void 0 ? _a : new _Vector__WEBPACK_IMPORTED_MODULE_1__.Vector(0, 0);\n    elm.loopBeginAngle = data[\"loopBeginAngle\"];\n    elm.loopEndAngle = data[\"loopEndAngle\"];\n    return elm;\n}\n\n\n//# sourceURL=webpack://rdfeyn/./src/Core/Loop.ts?");

/***/ }),

/***/ "./src/Core/MyString.ts":
/*!******************************!*\
  !*** ./src/Core/MyString.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MyString: () => (/* binding */ MyString),\n/* harmony export */   isString: () => (/* binding */ isString),\n/* harmony export */   makeMyString: () => (/* binding */ makeMyString)\n/* harmony export */ });\n/* harmony import */ var _Elem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Elem */ \"./src/Core/Elem.ts\");\n/* harmony import */ var _Vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Vector */ \"./src/Core/Vector.ts\");\n\n\n/**\n * A MyString is a String that can be moved around the screen.\n * It has a unique ID, a Shape, and a location.\n * It can be moved by a delta, or moved to an absolute location.\n * It can be copied, and it can be saved to a JSON object.\n * It can also be described as a string.\n */\nvar MyString = /** @class */ (function () {\n    function MyString(label) {\n        this.shape = \"String\";\n        this.origin = new _Vector__WEBPACK_IMPORTED_MODULE_1__.Vector(0, 0);\n        this.id = (0,_Elem__WEBPACK_IMPORTED_MODULE_0__.getElemID)();\n        this.label = label;\n    }\n    MyString.prototype.save = function () {\n        var saveData = {};\n        saveData[\"id\"] = this.id;\n        saveData[\"label\"] = this.label;\n        saveData[\"shape\"] = this.shape;\n        saveData[\"origin\"] = this.origin.save();\n        return saveData;\n    };\n    MyString.prototype.copy = function () {\n        var str = new MyString(this.label);\n        str.origin = this.origin;\n        return str;\n    };\n    MyString.prototype.move = function (delta) {\n        this.origin = this.origin.add(delta);\n    };\n    MyString.prototype.moveAbsolute = function (location) {\n        this.origin = location;\n    };\n    MyString.prototype.formalDistance = function (point) {\n        return this.origin.minus(point).length();\n    };\n    MyString.prototype.description = function () {\n        return \"\".concat(this.shape, \" id:\").concat(this.id, \" x:\").concat(this.origin.x, \" y:\").concat(this.origin.y, \" label:\").concat(this.label);\n    };\n    return MyString;\n}());\n\nfunction isString(elem) {\n    return elem.shape == \"String\";\n}\nfunction makeMyString(data) {\n    var shape = data[\"shape\"];\n    if (shape) {\n        return undefined;\n    }\n    var elm = new MyString(\"\");\n    elm.id = data[\"id\"];\n    elm.label = data[\"label\"];\n    return elm;\n}\n\n\n//# sourceURL=webpack://rdfeyn/./src/Core/MyString.ts?");

/***/ }),

/***/ "./src/Core/TextPosition.ts":
/*!**********************************!*\
  !*** ./src/Core/TextPosition.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   textPosition: () => (/* binding */ textPosition)\n/* harmony export */ });\n/* harmony import */ var _Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector */ \"./src/Core/Vector.ts\");\n\n/**\n * Position of text\n */\nfunction textPosition(text, position, config) {\n    //TODO\n    return position.add(new _Vector__WEBPACK_IMPORTED_MODULE_0__.Vector(-3, +3)); // font 仮定\n}\n\n\n//# sourceURL=webpack://rdfeyn/./src/Core/TextPosition.ts?");

/***/ }),

/***/ "./src/Core/Vector.ts":
/*!****************************!*\
  !*** ./src/Core/Vector.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Vector: () => (/* binding */ Vector),\n/* harmony export */   direction: () => (/* binding */ direction),\n/* harmony export */   isVector: () => (/* binding */ isVector),\n/* harmony export */   makeVector: () => (/* binding */ makeVector)\n/* harmony export */ });\n/* harmony import */ var _Elem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Elem */ \"./src/Core/Elem.ts\");\n\n/**\n * A Vector is a point in 2D space.\n * It has a unique ID, a Shape, and a location.\n * It can be moved by a delta, or moved to an absolute location.\n * It can be copied, and it can be saved to a JSON object.\n * It can also be described as a string.\n * It can be added to another Vector, or subtracted from another Vector.\n * It can be multiplied by a number.\n * It can be rotated by an angle.\n * It can be converted to a unit vector.\n * It can be converted to a floor vector.\n * It can be converted to a vector with integer coordinates.\n */\nvar Vector = /** @class */ (function () {\n    function Vector(x, y) {\n        this.shape = \"Point\";\n        this.x = 0;\n        this.y = 0;\n        this.id = (0,_Elem__WEBPACK_IMPORTED_MODULE_0__.getElemID)();\n        this.x = x;\n        this.y = y;\n    }\n    Vector.prototype.save = function () {\n        var saveData = {};\n        saveData[\"id\"] = this.id;\n        saveData[\"shape\"] = this.shape;\n        saveData[\"x\"] = this.x;\n        saveData[\"y\"] = this.x;\n        return saveData;\n    };\n    Vector.prototype.add = function (vec) {\n        return new Vector(this.x + vec.x, this.y + vec.y);\n    };\n    Vector.prototype.minus = function (vec) {\n        return new Vector(this.x - vec.x, this.y - vec.y);\n    };\n    Vector.prototype.length = function () {\n        return Math.pow((Math.pow(this.x, 2) + Math.pow(this.y, 2)), (1 / 2));\n    };\n    Vector.prototype.multi = function (num) {\n        return new Vector(this.x * num, this.y * num);\n    };\n    Vector.prototype.floor = function () {\n        return new Vector(Math.floor(this.x), Math.floor(this.y));\n    };\n    Vector.prototype.prod = function (vec) {\n        return this.x * vec.x + this.y * vec.y;\n    };\n    Vector.prototype.unit = function () {\n        return new Vector(this.x * (1 / this.length()), this.y * (1 / this.length()));\n    };\n    Vector.prototype.copy = function () {\n        return new Vector(this.x, this.y);\n    };\n    Vector.prototype.rotation = function (angle) {\n        return new Vector(this.x * Math.cos(angle) - this.y * Math.sin(angle), this.x * Math.sin(angle) + this.y * Math.cos(angle));\n    };\n    Vector.prototype.formalDistance = function (point) {\n        return (length = this.minus(point).length());\n        // if (length > 0.3) {\n        //   return Number.MAX_VALUE;\n        // }\n        // return 0;\n    };\n    Vector.prototype.move = function (delta) {\n        var vector = this.add(delta);\n        this.x = vector.x;\n        this.y = vector.y;\n    };\n    Vector.prototype.moveAbsolute = function (location) {\n        this.x = location.x;\n        this.y = location.y;\n    };\n    Vector.prototype.description = function () {\n        return \"\".concat(this.shape, \" id:\").concat(this.id, \" x:\").concat(this.x, \" y:\").concat(this.y);\n    };\n    return Vector;\n}());\n\nfunction isVector(elem) {\n    return elem.shape == \"Point\";\n}\nfunction direction(v1, v2) {\n    return v1.minus(v2);\n}\nfunction makeVector(data) {\n    var shape = data[\"shape\"];\n    if (shape) {\n        return undefined;\n    }\n    var elm = new Vector(0, 0);\n    elm.id = data[\"id\"];\n    elm.x = data[\"x\"];\n    elm.y = data[\"y\"];\n    return elm;\n}\n\n\n//# sourceURL=webpack://rdfeyn/./src/Core/Vector.ts?");

/***/ }),

/***/ "./src/Core/Vertex.ts":
/*!****************************!*\
  !*** ./src/Core/Vertex.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Vertex: () => (/* binding */ Vertex)\n/* harmony export */ });\n/* harmony import */ var _Loop__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Loop */ \"./src/Core/Loop.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n/**\n * A vertex is a loop with a radius of 0.3.\n */\nvar Vertex = /** @class */ (function (_super) {\n    __extends(Vertex, _super);\n    function Vertex() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.fill = true;\n        _this.radius = 0.3;\n        return _this;\n    }\n    return Vertex;\n}(_Loop__WEBPACK_IMPORTED_MODULE_0__.Loop));\n\n\n\n//# sourceURL=webpack://rdfeyn/./src/Core/Vertex.ts?");

/***/ }),

/***/ "./src/UI/DrawContext.ts":
/*!*******************************!*\
  !*** ./src/UI/DrawContext.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DrawContext: () => (/* binding */ DrawContext)\n/* harmony export */ });\n/* harmony import */ var _Config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Config */ \"./src/Config.ts\");\n/* harmony import */ var _Core_Vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Core/Vector */ \"./src/Core/Vector.ts\");\n/* harmony import */ var _looger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../looger */ \"./src/looger.ts\");\n/* harmony import */ var _UIColor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./UIColor */ \"./src/UI/UIColor.ts\");\n\n\n\n\n/**\n * DrawContext\n *\n * This class is used to draw on canvas.\n */\nvar DrawContext = /** @class */ (function () {\n    function DrawContext(context) {\n        this.exportType = \"canvas\";\n        this.exportString = \"\";\n        this.coordinate = new _Core_Vector__WEBPACK_IMPORTED_MODULE_1__.Vector(0, 0);\n        this.scale = _Config__WEBPACK_IMPORTED_MODULE_0__.config.scale;\n        this.canvasContext = context;\n        this.canvasContext.font = \"25px Arial\";\n    }\n    /**\n     * output is used to output the result of drawing.\n     */\n    DrawContext.prototype.output = function (desc, exportType, id) {\n        if (this.exportType == \"canvas\") {\n            if (id == \"sub\") {\n                var selector = document.querySelector(\"div#sub\");\n                selector.textContent = desc;\n                return;\n            }\n            if (id == \"current\") {\n                var selector = document.querySelector(\"div#current\");\n                selector.textContent = desc;\n                return;\n            }\n            if (id == \"mode\") {\n                var selector = document.querySelector(\"div#mode\");\n                selector.textContent = desc;\n                return;\n            }\n        }\n    };\n    /**\n     * set the color of stroke.\n     */\n    DrawContext.prototype.setStrokeColor = function (color) {\n        if (this.exportType == \"canvas\") {\n            this.canvasContext.strokeStyle = (0,_UIColor__WEBPACK_IMPORTED_MODULE_3__.getColor)(color);\n            return;\n        }\n    };\n    /**\n     * set the color of fill.\n     */\n    DrawContext.prototype.setFillColor = function (color) {\n        if (this.exportType == \"canvas\") {\n            this.canvasContext.fillStyle = (0,_UIColor__WEBPACK_IMPORTED_MODULE_3__.getColor)(color);\n            return;\n        }\n    };\n    /**\n     * set export type.\n     */\n    DrawContext.prototype.setExportType = function (exportType) {\n        this.exportType = exportType;\n        if (exportType == \"canvas\") {\n            this.scale = _Config__WEBPACK_IMPORTED_MODULE_0__.config.scale;\n        }\n        if (exportType == \"tikz\") {\n            this.scale = _Config__WEBPACK_IMPORTED_MODULE_0__.config.scale / _Config__WEBPACK_IMPORTED_MODULE_0__.config.scale;\n        }\n        if (exportType == \"svg\") {\n            this.scale = _Config__WEBPACK_IMPORTED_MODULE_0__.config.scale;\n        }\n    };\n    /**\n     * begin path.\n     */\n    DrawContext.prototype.beginPath = function () {\n        if (this.exportType == \"canvas\") {\n            this.canvasContext.beginPath();\n            return;\n        }\n    };\n    /**\n     * move to a point.\n     */\n    DrawContext.prototype.moveTo = function (x, y) {\n        this.coordinate = new _Core_Vector__WEBPACK_IMPORTED_MODULE_1__.Vector(x, y);\n    };\n    /**\n     * close path.\n     */\n    DrawContext.prototype.closePath = function () {\n        if (this.exportType == \"canvas\") {\n            this.canvasContext.closePath();\n            return;\n        }\n    };\n    // setLineDash(style: LineStyle) {\n    //     loggerVer(\"setLineDash:\" + style)\n    //     this.lineDashStyle = style\n    // }\n    // setLoopDash(style: LineStyle) {\n    //     loggerVer(\"setLoopDash:\" + style)\n    //     this.loopDashStyle = style\n    // }\n    /**\n     * add string for export.\n     */\n    DrawContext.prototype.addExport = function (txt) {\n        this.exportString += txt;\n    };\n    /**\n     * set line into point (x,y).\n     */\n    DrawContext.prototype.lineTo = function (x, y_, linestyle) {\n        if (this.exportType == \"canvas\") {\n            var y = y_;\n            if (linestyle == \"dash\") {\n                this.canvasContext.setLineDash([2, 2]);\n            }\n            else {\n                this.canvasContext.setLineDash([]);\n            }\n            this.canvasContext.moveTo(this.coordinate.x * this.scale, this.coordinate.y * this.scale);\n            this.canvasContext.lineTo(x * this.scale, y * this.scale);\n            return;\n        }\n        if (this.exportType == \"tikz\") {\n            var y = -y_;\n            if (linestyle == \"wave\") {\n                this.addExport(\"\\\\draw [snake=snake, segment amplitude=0.2mm,segment length=1mm](\".concat(this.coordinate.x, \",\").concat(-this.coordinate.y, \") -- (\").concat(x, \",\").concat(y, \");\\n\"));\n                return;\n            }\n            if (linestyle == \"coil\") {\n                // コイル線のパラメータ\n                var segmentLength = 1.0;\n                var aspect = 0.9;\n                var amplitude = 0.5;\n                var from = void 0, to = void 0;\n                var pathLength = void 0;\n                from = new _Core_Vector__WEBPACK_IMPORTED_MODULE_1__.Vector(this.coordinate.x, -this.coordinate.y);\n                to = new _Core_Vector__WEBPACK_IMPORTED_MODULE_1__.Vector(x, -y_);\n                pathLength = to.minus(from).length();\n                // 経路の長さが1波長(segmentLength)よりも短い場合、線の装飾をしない。\n                if (pathLength < segmentLength) {\n                    this.addExport(\"\\\\draw(\".concat(from.x, \",\").concat(from.y, \") -- (\").concat(to.x, \",\").concat(to.y, \");\\n\"));\n                }\n                else {\n                    var n = void 0;\n                    var coilNTimesLength = void 0;\n                    var effectiveSegmentLength = void 0;\n                    n = Math.floor(pathLength / segmentLength);\n                    coilNTimesLength =\n                        2 * aspect * amplitude + (n - 1 / 2) * segmentLength;\n                    effectiveSegmentLength =\n                        segmentLength + (pathLength - coilNTimesLength) / (n - 1 / 2);\n                    this.addExport(\"\\\\draw[decorate, decoration={coil,\" +\n                        \"amplitude = \".concat(amplitude, \"mm,\") +\n                        \"segment length = \".concat(effectiveSegmentLength, \"mm,\") +\n                        \"aspect = \".concat(aspect) +\n                        \"}]\" +\n                        \"(\".concat(from.x, \",\").concat(from.y, \") -- (\").concat(to.x, \",\").concat(to.y, \");\\n\"));\n                }\n                return;\n            }\n            if (linestyle == \"dash\") {\n                this.addExport(\"\\\\draw [dashed](\".concat(this.coordinate.x, \",\").concat(-this.coordinate\n                    .y, \") -- (\").concat(x, \",\").concat(y, \");\\n\"));\n            }\n            else {\n                this.addExport(\"\\\\draw (\".concat(this.coordinate.x, \",\").concat(-this.coordinate\n                    .y, \") -- (\").concat(x, \",\").concat(y, \");\\n\"));\n            }\n            return;\n        }\n        if (this.exportType === \"svg\") {\n            var dash = \"\";\n            if (linestyle === \"dash\") {\n                dash = 'stroke-dasharray=\"4\"';\n            }\n            this.addExport(\"<line x1=\\\"\".concat(this.coordinate.x * this.scale, \"\\\" y1=\\\"\").concat(this.coordinate.y * this.scale, \"\\\" x2=\\\"\").concat(x * this.scale, \"\\\" y2=\\\"\").concat(y_ * this.scale, \"\\\" stroke=\\\"black\\\" \").concat(dash, \"/>\"));\n            return;\n        }\n    };\n    // fill() {\n    //     if (this.exportType == \"canvas\") {\n    //         this.canvasContext.fill()\n    //         return\n    //     }\n    // }\n    /**\n     * fill rectangle.\n     */\n    DrawContext.prototype.fillRect = function (x, y_, w, h) {\n        if (this.exportType == \"canvas\") {\n            var y = y_;\n            // loggerVer(`fillRect${x} ${y} ${w} ${h}`);\n            this.canvasContext.fillRect(x * this.scale, y * this.scale, w * this.scale, h * this.scale);\n            return;\n        }\n    };\n    /**\n     * clear rectangle.\n     */\n    DrawContext.prototype.clearRect = function () {\n        if (this.exportType == \"canvas\") {\n            this.canvasContext.clearRect(0, 0, this.canvasContext.canvas.width, this.canvasContext.canvas.height);\n            return;\n        }\n        if (this.exportType == \"tikz\") {\n            this.exportString = \"\";\n        }\n        if (this.exportType == \"svg\") {\n            this.exportString = \"\";\n        }\n    };\n    /**\n     * stroke.\n     */\n    DrawContext.prototype.stroke = function () {\n        if (this.exportType == \"canvas\") {\n            this.canvasContext.stroke();\n            return;\n        }\n    };\n    /**\n     * fill text\n     */\n    DrawContext.prototype.fillText = function (txt, x, y) {\n        if (this.exportType == \"canvas\") {\n            this.canvasContext.fillText(txt, x * this.scale, y * this.scale);\n            return;\n        }\n        if (this.exportType == \"tikz\") {\n            // \\node[align=left] at (19,19) {\\tiny $\\int dx y^2$};\n            this.addExport(\"\\\\node[align=left] at (\".concat(x, \",\").concat(-y, \") {\\\\scalebox{0.3} { $\").concat(txt, \"$}};\"));\n            return;\n        }\n        if (this.exportType == \"svg\") {\n            this.addExport(\"<text x=\\\"\".concat(x * this.scale, \"\\\" y=\\\"\").concat(y * this.scale, \"\\\" font-family=\\\"Verdana\\\" font-size=\\\"35\\\">\\n        \").concat(txt, \"</text>\"));\n            return;\n        }\n    };\n    /**\n     * draw arc\n     */\n    DrawContext.prototype.arc = function (x, y_, radius, startAngle, endAngle, loopStyle, fill) {\n        if (this.exportType == \"canvas\") {\n            var y = y_;\n            if (loopStyle == \"dash\") {\n                this.canvasContext.setLineDash([2, 2]);\n            }\n            else {\n                this.canvasContext.setLineDash([]);\n            }\n            this.canvasContext.arc(x * this.scale, y * this.scale, radius * this.scale, startAngle, endAngle);\n            if (fill) {\n                this.canvasContext.fill();\n            }\n            return;\n        }\n        if (this.exportType == \"tikz\") {\n            var y = -y_;\n            var ea = (-startAngle / (2 * Math.PI)) * 360;\n            var sa = (-endAngle / (2 * Math.PI)) * 360;\n            for (var n = 0; n < 2; n++) {\n                if (sa < 0) {\n                    sa += 360;\n                }\n                if (sa > 360) {\n                    sa -= 360;\n                }\n                if (ea < 0) {\n                    ea += 360;\n                }\n                if (ea > 360) {\n                    ea -= 360;\n                }\n                if (sa > ea) {\n                    ea += 360;\n                }\n            }\n            var option = \"\";\n            if (loopStyle == \"dash\") {\n                option = \"[dashed]\";\n            }\n            if (loopStyle == \"wave\") {\n                option = \"[decorate, decoration={snake, amplitude = 0.2mm, segment length = 1mm}]\";\n            }\n            if (loopStyle == \"coil\") {\n                // コイル線のパラメータ\n                var segmentLength = 1.0;\n                var aspect = 0.9;\n                var amplitude = 0.5;\n                var pathLength = void 0;\n                pathLength = radius * (endAngle - startAngle);\n                // 経路の長さが1波長(segmentLength)よりも短い場合、線の装飾をしない。\n                if (pathLength < segmentLength) {\n                    option = \"\";\n                }\n                else {\n                    var n = void 0;\n                    var effectiveSegmentLength = void 0;\n                    var coilNTimesLength = void 0;\n                    n = Math.floor(pathLength / segmentLength);\n                    coilNTimesLength =\n                        2 * aspect * amplitude + (n - 1 / 2) * segmentLength;\n                    effectiveSegmentLength =\n                        segmentLength + (pathLength - coilNTimesLength) / (n - 1 / 2);\n                    option =\n                        \"[decorate, decoration={coil,\" +\n                            \"amplitude = \".concat(amplitude, \"mm,\") +\n                            \"segment length = \".concat(effectiveSegmentLength, \"mm,\") +\n                            \"aspect = \".concat(aspect) +\n                            \"}]\";\n                }\n            }\n            var command = \"\\\\draw\";\n            if (fill) {\n                command = \"\\\\fill\";\n            }\n            if (Math.abs(endAngle - startAngle) == 2 * Math.PI) {\n                this.addExport(\"\".concat(command, \" \").concat(option, \" (\").concat(x, \",\").concat(y, \") circle [radius=\").concat(radius, \"];\"));\n            }\n            else {\n                this.addExport(\"\".concat(command, \" \").concat(option, \" ([shift=(\").concat(sa, \":\").concat(radius, \")]\").concat(x, \", \").concat(y, \") arc [radius=\").concat(radius, \", start angle=\").concat(sa, \", end angle=\").concat(ea, \"];\"));\n            }\n            return;\n        }\n        if (this.exportType == \"svg\") {\n            var y = y_;\n            var dash = \"\";\n            if (loopStyle == \"dash\") {\n                dash = 'stroke-dasharray=\"4\"';\n            }\n            if (Math.abs(startAngle - endAngle) <= (Math.PI / 1) * 360) {\n                var fillStr = \"fill=\\\"none\\\"\";\n                if (fill) {\n                    fillStr = \"fill=\\\"black\\\"\";\n                }\n                this.addExport(\"<circle cx=\\\"\".concat(x * this.scale, \"\\\" cy=\\\"\").concat(y * this.scale, \"\\\" r=\\\"\").concat(radius * this.scale, \"\\\" stroke=\\\"black\\\" \").concat(dash, \" \").concat(fillStr, \"/>\"));\n                return;\n            }\n            // TODO cole, wave\n            var sx = x + radius * Math.cos(startAngle);\n            var sy = y + radius * Math.sin(startAngle);\n            var ex = x + radius * Math.cos(endAngle);\n            var ey = y + radius * Math.sin(endAngle);\n            var angle = (360 * (endAngle - startAngle)) / (2 * Math.PI);\n            var lx = 0;\n            var ly = 0;\n            if (angle > 0) {\n                ly = 1;\n            }\n            this.addExport(\"<path d=\\\"M \".concat(sx * this.scale, \", \").concat(sy * this.scale, \" A \").concat(radius * this.scale, \" \").concat(radius * this.scale, \" \").concat(angle, \" \").concat(lx, \" \").concat(ly, \" \").concat(ex * this.scale, \", \").concat(ey * this.scale, \"\\\" stroke=\\\"black\\\" \").concat(dash, \" fill=\\\"none\\\"/>\"));\n        }\n    };\n    DrawContext.prototype.startExport = function () {\n        if (this.exportType == \"tikz\") {\n            this.addExport(\"\\\\newcommand{\\\\myDiagram}{\");\n            this.addExport(\"\\\\begin{tikzpicture}[scale=0.1, baseline=(current bounding box.center)]\\n\");\n            return;\n        }\n        if (this.exportType == \"svg\") {\n            this.addExport(\"<svg viewBox=\\\"0 0 \".concat(50 * this.scale, \" \").concat(50 * this.scale, \"\\\">\"));\n        }\n        return;\n    };\n    /**\n     * return export string\n     */\n    DrawContext.prototype.endExport = function () {\n        if (this.exportType == \"tikz\") {\n            this.addExport(\"\\\\end{tikzpicture}\\n \");\n            this.addExport(\"}\\n \");\n            var selector = document.querySelector(\"div#output-tikz\");\n            selector.textContent = this.exportString;\n            var ret = this.exportString;\n            (0,_looger__WEBPACK_IMPORTED_MODULE_2__.loggerVer)(this.exportString);\n            this.exportString = \"\";\n            return ret;\n        }\n        if (this.exportType == \"svg\") {\n            this.addExport(\"</svg>\");\n            var selector = document.querySelector(\"div#output-svg\");\n            selector.textContent = this.exportString;\n            this.fildDownload(this.exportString);\n            var ret = this.exportString;\n            (0,_looger__WEBPACK_IMPORTED_MODULE_2__.loggerVer)(this.exportString);\n            this.exportString = \"\";\n            return ret;\n        }\n        return \"\";\n    };\n    /**\n     *  save data\n     */\n    DrawContext.prototype.insertsavedata = function (saveData) {\n        if (this.exportType == \"svg\") {\n            this.addExport(\"<!-- QuantumSketchSaveDataStart@\".concat(saveData, \"@ -->\"));\n        }\n    };\n    /**\n     * file download\n     */\n    DrawContext.prototype.fildDownload = function (content) {\n        var blob = new Blob([content], { type: \"text/plain\" });\n        var link = document.getElementById(\"download\");\n        if (link) {\n            link.href = window.URL.createObjectURL(blob);\n            var dateStr = new Date().toISOString();\n            var fileName = \"\".concat(dateStr, \".svg\");\n            link.download = fileName;\n            link.hidden = false;\n        }\n    };\n    return DrawContext;\n}());\n\n\n\n//# sourceURL=webpack://rdfeyn/./src/UI/DrawContext.ts?");

/***/ }),

/***/ "./src/UI/RDDraw.ts":
/*!**************************!*\
  !*** ./src/UI/RDDraw.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RDDraw: () => (/* binding */ RDDraw)\n/* harmony export */ });\n/* harmony import */ var _Config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Config */ \"./src/Config.ts\");\n/* harmony import */ var _Core_Line__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Core/Line */ \"./src/Core/Line.ts\");\n/* harmony import */ var _Core_Loop__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Core/Loop */ \"./src/Core/Loop.ts\");\n/* harmony import */ var _Core_MyString__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Core/MyString */ \"./src/Core/MyString.ts\");\n/* harmony import */ var _Core_Vector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Core/Vector */ \"./src/Core/Vector.ts\");\n/* harmony import */ var _looger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../looger */ \"./src/looger.ts\");\n/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./draw */ \"./src/UI/draw.ts\");\n/* harmony import */ var _RDRepository__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./RDRepository */ \"./src/UI/RDRepository.ts\");\n/* harmony import */ var _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./RepositoryCommand */ \"./src/UI/RepositoryCommand.ts\");\n\n\n\n\n\n\n\n\n\n/**\n * Draw class for draw and mouse event\n * @description\n * 1. Draw\n * 2. Mouse Event\n * 3. Key Event\n * 4. Repository Command\n * 5. Export\n * 6. Import\n * 7. Undo\n * 8. Redo\n * 9. Select\n * 10. Move\n * 11. Delete\n * 12. Change Style\n * 13. Change Type\n * 14. Change Scale\n * 15. Change Arc Angle\n * 16. Change Arc End Angle\n * 17. Fill\n * 18. Arrow Toggle\n * 19. Rotation\n * 20. Change String\n * 21. Change Vertex\n * 22. Change Loop\n * 23. Change Line\n * 24. Change String\n */\nvar RDDraw = /** @class */ (function () {\n    function RDDraw(canvas, drawContext) {\n        this.repository = new _RDRepository__WEBPACK_IMPORTED_MODULE_7__.RDRepository();\n        this.isClick = false;\n        this.isMouseDown = \"Up\";\n        this.clickIimeOutID = undefined;\n        // private prevX: number = 0;\n        // private prevY: number = 0;\n        this.pointerPrev = new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(0, 0);\n        this.rawPointer = new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(0, 0);\n        this.stringMode = undefined;\n        this.drawMode = \"line\";\n        this.lineMode = undefined;\n        this.isNoSelectMode = false;\n        this.canvas = canvas;\n        this.context = canvas.getContext(\"2d\");\n        this.drawContext = drawContext;\n        this.bind();\n        this.drawAll();\n    }\n    RDDraw.prototype.bind = function () {\n        var _this = this;\n        var _a, _b, _c, _d, _e;\n        this.canvas.addEventListener(\"click\", function (ev) {\n            _this.click(ev);\n        });\n        // canvas.addEventListener(\"dblclick\", (ev) => {\n        //     this.dbclick(ev)\n        // })\n        this.canvas.addEventListener(\"mousedown\", function (ev) {\n            _this.mouseDown(ev);\n        });\n        this.canvas.addEventListener(\"mouseup\", function (ev) {\n            _this.mouseUp(ev);\n        });\n        this.canvas.addEventListener(\"mousemove\", function (ev) {\n            _this.move(ev);\n        });\n        document.addEventListener(\"keypress\", function (ev) {\n            _this.keyPress(ev);\n        });\n        (_a = (document.getElementById(\"nav-redo\"))) === null || _a === void 0 ? void 0 : _a.addEventListener(\"click\", function (ev) {\n            ev.preventDefault();\n            _this.redo();\n        });\n        (_b = (document.getElementById(\"nav-undo\"))) === null || _b === void 0 ? void 0 : _b.addEventListener(\"click\", function (ev) {\n            ev.preventDefault();\n            _this.undo();\n        });\n        (_c = (document.getElementById(\"nav-export-tikz\"))) === null || _c === void 0 ? void 0 : _c.addEventListener(\"click\", function (ev) {\n            ev.preventDefault();\n            _this.drawAll(\"tikz\");\n        });\n        (_d = (document.getElementById(\"nav-export-svg\"))) === null || _d === void 0 ? void 0 : _d.addEventListener(\"click\", function (ev) {\n            ev.preventDefault();\n            _this.drawAll(\"svg\");\n        });\n        (_e = (document.getElementById(\"download\"))) === null || _e === void 0 ? void 0 : _e.addEventListener(\"click\", function (ev) {\n            _this.drawAll(\"svg\");\n        });\n    };\n    RDDraw.prototype.setPrevXY = function (eventX, eventY) {\n        this.rawPointer = new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(eventX, eventY);\n        // loggerVer(`rawPointer ${this.rawPointer.x}  ${this.rawPointer.y}`);\n    };\n    RDDraw.prototype.getPointer = function () {\n        var scale = _Config__WEBPACK_IMPORTED_MODULE_0__.config.scale;\n        var p = this.rawPointer.multi(1 / scale).floor();\n        // loggerVer(`p ${p.x}  ${p.y}`);\n        return p;\n    };\n    RDDraw.prototype.click = function (ev) {\n        var _this = this;\n        this.isMouseDown = \"Up\";\n        var p = this.getPointer();\n        var x = p.x;\n        var y = p.y;\n        if (this.isClick) {\n            if (this.clickIimeOutID) {\n                clearTimeout(this.clickIimeOutID);\n            }\n            this.subSelect(new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(x, y));\n            this.isClick = false;\n            return;\n        }\n        this.isClick = true;\n        this.clickIimeOutID = setTimeout(function () {\n            _this.isClick = false;\n            _this.clickIimeOutID = undefined;\n            _this.select(new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(x, y));\n        }, 250);\n    };\n    RDDraw.prototype.mouseDown = function (ev) {\n        var _this = this;\n        this.isMouseDown = \"Downning\";\n        setTimeout(function () {\n            if (_this.isMouseDown == \"Downning\") {\n                _this.isMouseDown = \"Down\";\n            }\n        }, 300);\n    };\n    RDDraw.prototype.mouseUp = function (ev) {\n        this.isMouseDown = \"Up\";\n    };\n    RDDraw.prototype.move = function (ev) {\n        // loggerVer(`offset ${ev.offsetX}  ${ev.offsetY}`);\n        // loggerVer(`screen ${ev.screenX}  ${ev.screenY}`);\n        this.setPrevXY(ev.offsetX, ev.offsetY);\n        if (this.isMouseDown == \"Down\") {\n            this.drag(ev);\n        }\n    };\n    RDDraw.prototype.keyPress = function (ev) {\n        (0,_looger__WEBPACK_IMPORTED_MODULE_5__.loggerVer)(\"key:\" + ev.key);\n        var p = this.getPointer();\n        var x = p.x;\n        var y = p.y;\n        if (ev.ctrlKey && ev.key == \"c\") {\n            this.copy();\n            (0,_looger__WEBPACK_IMPORTED_MODULE_5__.loggerOn)(\"crt + c\");\n            return;\n        }\n        if (ev.key == \"/\") {\n            this.setString(x, y);\n            return;\n        }\n        if (ev.ctrlKey && ev.key == \"e\") {\n            this.drawAll(\"svg\");\n            return;\n        }\n        if (ev.key == \"e\") {\n            this.drawAll(\"tikz\");\n            return;\n        }\n        if (ev.key == \"f\") {\n            this.fill(x, y);\n        }\n        if (ev.key == \"v\") {\n            this.putVertex(new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(x, y));\n            return;\n        }\n        if (ev.key == \"n\") {\n            this.nextElem();\n            return;\n        }\n        if (ev.key == \"b\") {\n            this.preElem();\n            return;\n        }\n        if (ev.key == \"s\") {\n            this.nextSubElem();\n            return;\n        }\n        if (ev.key == \"a\") {\n            this.preSubElem();\n            return;\n        }\n        if (ev.key == \"p\") {\n            this.putLine(undefined, true);\n            return;\n        }\n        if (ev.key == \"P\") {\n            this.putLine(undefined, false);\n            return;\n        }\n        if (ev.key == \"-\") {\n            this.putLine(new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(x, y), true);\n            return;\n        }\n        if (ev.key == \"l\") {\n            this.putLoop(x, y);\n            return;\n        }\n        if (ev.key == \"r\") {\n            this.rotation();\n            return;\n        }\n        if (ev.key == \"R\") {\n            this.antiRotation();\n            return;\n        }\n        if (ev.key == \"W\") {\n            this.changeArcAngle();\n            return;\n        }\n        if (ev.key == \"X\") {\n            this.changeArcAngleMinus();\n            return;\n        }\n        if (ev.key == \"E\") {\n            this.changeArcEndAngle();\n            return;\n        }\n        if (ev.key == \"C\") {\n            this.changeArcEndAngleMinus();\n            return;\n        }\n        if (ev.key == \"t\") {\n            this.changeType();\n            return;\n        }\n        if (ev.key == \"q\") {\n            this.changeStyle();\n            return;\n        }\n        if (ev.key == \"d\") {\n            this.delete();\n            return;\n        }\n        if (ev.key == \"@\") {\n            this.allowToggle();\n            return;\n        }\n        if (ev.key == \"c\") {\n            this.changeSelect();\n            return;\n        }\n        if (ev.key == \"z\") {\n            this.noSelectMode();\n            return;\n        }\n        if (ev.key == \"8\") {\n            this.keyUp();\n            return;\n        }\n        if (ev.key == \"6\") {\n            this.keyRight();\n            return;\n        }\n        if (ev.key == \"4\") {\n            this.keyLeft();\n            return;\n        }\n        if (ev.key == \"2\") {\n            this.keyDown();\n            return;\n        }\n        if (ev.key == \"w\") {\n            this.changeScale();\n            return;\n        }\n        if (ev.key == \"x\") {\n            this.changeScaleDown();\n            return;\n        }\n        if (ev.key == \">\") {\n            this.redo();\n            return;\n        }\n        if (ev.key == \"<\") {\n            this.undo();\n            return;\n        }\n        if (ev.key == \"m\") {\n            this.changeMode();\n            return;\n        }\n    };\n    RDDraw.prototype.drag = function (ev) {\n        (0,_looger__WEBPACK_IMPORTED_MODULE_5__.loggerVer)(\"drag\");\n        var current = this.repository.currentElement();\n        if (!current) {\n            return;\n        }\n        var pointer = this.getPointer();\n        if (!(pointer.x == this.pointerPrev.x && pointer.y == this.pointerPrev.y)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.MoveAbsolute(current, pointer.copy()));\n            this.drawAll();\n            this.pointerPrev = pointer;\n        }\n    };\n    RDDraw.prototype.keyUp = function () {\n        (0,_looger__WEBPACK_IMPORTED_MODULE_5__.loggerVer)(\"keyUp\");\n        var current = this.repository.currentElement();\n        if (!current) {\n            return;\n        }\n        this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.Move(current, new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(0, -1).multi(1 / _Config__WEBPACK_IMPORTED_MODULE_0__.config.scale)));\n        this.drawAll();\n    };\n    RDDraw.prototype.keyRight = function () {\n        (0,_looger__WEBPACK_IMPORTED_MODULE_5__.loggerVer)(\"keyRight\");\n        var current = this.repository.currentElement();\n        if (!current) {\n            return;\n        }\n        this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.Move(current, new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(1, 0).multi(1 / _Config__WEBPACK_IMPORTED_MODULE_0__.config.scale)));\n        this.drawAll();\n    };\n    RDDraw.prototype.keyLeft = function () {\n        (0,_looger__WEBPACK_IMPORTED_MODULE_5__.loggerVer)(\"keyLeft\");\n        var current = this.repository.currentElement();\n        if (!current) {\n            return;\n        }\n        this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.Move(current, new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(-1, 0).multi(1 / _Config__WEBPACK_IMPORTED_MODULE_0__.config.scale)));\n        this.drawAll();\n    };\n    RDDraw.prototype.keyDown = function () {\n        (0,_looger__WEBPACK_IMPORTED_MODULE_5__.loggerVer)(\"keyDown\");\n        var current = this.repository.currentElement();\n        if (!current) {\n            return;\n        }\n        this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.Move(current, new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(0, 1).multi(1 / _Config__WEBPACK_IMPORTED_MODULE_0__.config.scale)));\n        this.drawAll();\n    };\n    RDDraw.prototype.noSelectMode = function () {\n        this.isNoSelectMode = !this.isNoSelectMode;\n        if (this.isNoSelectMode) {\n            this.repository.clearSelectMode();\n        }\n        this.drawAll();\n    };\n    RDDraw.prototype.nextElem = function () {\n        this.repository.nextElem();\n        this.drawAll();\n    };\n    RDDraw.prototype.nextSubElem = function () {\n        this.repository.nextSubElem();\n        this.drawAll();\n    };\n    RDDraw.prototype.preElem = function () {\n        this.repository.preElem();\n        this.drawAll();\n    };\n    RDDraw.prototype.preSubElem = function () {\n        this.repository.preSubElem();\n        this.drawAll();\n    };\n    RDDraw.prototype.fill = function (x, y) {\n        var current = this.repository.currentElement();\n        if (current && (0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(current)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.Fill(current));\n            this.drawAll();\n            return;\n        }\n        return;\n    };\n    RDDraw.prototype.setString = function (x, y) {\n        var current = this.repository.currentElement();\n        var defult = \"\";\n        if (current && (0,_Core_MyString__WEBPACK_IMPORTED_MODULE_3__.isString)(current)) {\n            defult = current.label;\n        }\n        var text = window.prompt(\"input text( ex. \\\\int e^x dx)\", defult);\n        if (text == null) {\n            return;\n        }\n        if (current && (0,_Core_MyString__WEBPACK_IMPORTED_MODULE_3__.isString)(current)) {\n            current.label = text;\n            this.drawAll();\n            return;\n        }\n        var str = new _Core_MyString__WEBPACK_IMPORTED_MODULE_3__.MyString(text);\n        str.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(x, y);\n        var command = new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetString(str);\n        this.repository.doCommand(command);\n        this.drawAll();\n    };\n    RDDraw.prototype.putVertex = function (vertex) {\n        (0,_looger__WEBPACK_IMPORTED_MODULE_5__.loggerVer)(\"put vertex..\");\n        this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetVertex(vertex));\n        this.drawAll();\n    };\n    RDDraw.prototype.putLoop = function (x, y) {\n        (0,_looger__WEBPACK_IMPORTED_MODULE_5__.loggerVer)(\"put Loop..\");\n        var loop = new _Core_Loop__WEBPACK_IMPORTED_MODULE_2__.Loop();\n        loop.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(x, y);\n        this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetLoop(loop));\n        this.drawAll();\n    };\n    RDDraw.prototype.drawAll = function (exportType) {\n        var _this = this;\n        if (exportType === void 0) { exportType = \"canvas\"; }\n        this.drawContext.setExportType(exportType);\n        // clear\n        this.drawContext.clearRect();\n        this.drawContext.startExport();\n        var elms = this.repository.getAllElements();\n        this.drawContext.beginPath();\n        elms.forEach(function (elm, index) {\n            // loggerVer(\"draw..\");\n            (0,_draw__WEBPACK_IMPORTED_MODULE_6__.draw)(_this.drawContext, elm, exportType);\n        });\n        if (exportType === \"svg\") {\n            this.drawContext.insertsavedata(this.repository.save());\n        }\n        this.drawContext.endExport();\n        if (this.isNoSelectMode) {\n            return;\n        }\n        if (exportType != \"canvas\") {\n            return;\n        }\n        var sub = this.repository.currentSubElement();\n        if (sub) {\n            (0,_draw__WEBPACK_IMPORTED_MODULE_6__.draw)(this.drawContext, sub, \"canvas\", \"sub\");\n            this.drawContext.output(\"sub:   \" + sub.description(), \"html\", \"sub\");\n        }\n        var current = this.repository.currentElement();\n        if (current) {\n            (0,_draw__WEBPACK_IMPORTED_MODULE_6__.draw)(this.drawContext, current, \"canvas\", \"select\");\n            this.drawContext.output(\"current: \" +\n                current.description() +\n                \" \".concat(current.formalDistance(this.getPointer())), \"html\", \"current\");\n        }\n        this.drawContext.output(this.drawMode, \"html\", \"mode\");\n        this.drawContext.closePath();\n    };\n    RDDraw.prototype.putLine = function (point, isReverse) {\n        var current = this.repository.currentElement();\n        var sub = this.repository.currentSubElement();\n        if (point) {\n            sub = current;\n            current = point;\n        }\n        if (!current) {\n            return;\n        }\n        if (!sub) {\n            return;\n        }\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(current) && (0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(sub)) {\n            if (current.x == sub.x && current.y == sub.y) {\n                return;\n            }\n            var line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n            line.origin = sub;\n            line.to = current;\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetLine(line));\n            this.repository.select(current);\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(current) && (0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(sub)) {\n            if (current.origin.x == sub.origin.x &&\n                current.origin.y == sub.origin.y) {\n                return;\n            }\n            var line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n            line.between(current, sub);\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetLine(line));\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(current) && (0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(sub)) {\n            var line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n            line.origin = current;\n            if (isReverse) {\n                sub.addLineTo(line);\n            }\n            else {\n                sub.addLineOrigin(line);\n            }\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetLine(line));\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(current) && (0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(sub)) {\n            var line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n            line.origin = sub;\n            current.addLineTo(line);\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetLine(line));\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(current) && (0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(sub)) {\n            var line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n            if (isReverse) {\n                line.origin = sub.to;\n            }\n            else {\n                line.origin = sub.origin;\n            }\n            line.to = current;\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetLine(line));\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(current) && (0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(sub)) {\n            var line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n            if (isReverse) {\n                line.to = current.to;\n            }\n            else {\n                line.to = current.origin;\n            }\n            line.origin = sub;\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetLine(line));\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(current) && (0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(sub)) {\n            var line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n            if (isReverse) {\n                line.to = current.to;\n            }\n            else {\n                line.to = current.origin;\n            }\n            line.origin = sub.to;\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetLine(line));\n            this.drawAll();\n            return;\n        }\n    };\n    RDDraw.prototype.copy = function () {\n        var elem = this.repository.currentElement();\n        if (elem == undefined) {\n            return;\n        }\n        var copied = elem.copy();\n        copied.move(new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(0.1, 0.1));\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(copied)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetLine(copied));\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(copied)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetLoop(copied));\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_MyString__WEBPACK_IMPORTED_MODULE_3__.isString)(copied)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetString(copied));\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(copied)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetVertex(copied));\n            this.drawAll();\n            return;\n        }\n    };\n    RDDraw.prototype.rotation = function () {\n        var elem = this.repository.currentElement();\n        if (!elem) {\n            return;\n        }\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(elem)) {\n            return;\n        }\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.Rotation(elem, (2 * Math.PI) / 72));\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.Rotation(elem, (2 * Math.PI) / 72));\n            this.drawAll();\n            return;\n        }\n    };\n    RDDraw.prototype.antiRotation = function () {\n        var elem = this.repository.currentElement();\n        if (!elem) {\n            return;\n        }\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(elem)) {\n            return;\n        }\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.Rotation(elem, -(2 * Math.PI) / 72));\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.Rotation(elem, -(2 * Math.PI) / 72));\n            this.drawAll();\n            return;\n        }\n    };\n    RDDraw.prototype.allowToggle = function () {\n        var elem = this.repository.currentElement();\n        if (!elem) {\n            return;\n        }\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(elem)) {\n            return;\n        }\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.ArrowToggle(elem));\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(elem)) {\n            return;\n        }\n    };\n    RDDraw.prototype.changeSelect = function () {\n        this.repository.changeSelect();\n        this.drawAll();\n        return;\n    };\n    RDDraw.prototype.changeType = function () {\n        var elem = this.repository.currentElement();\n        if (!elem) {\n            return;\n        }\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(elem)) {\n            return;\n        }\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.ChangeType(elem));\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(elem)) {\n            return;\n        }\n    };\n    RDDraw.prototype.changeArcAngle = function () {\n        (0,_looger__WEBPACK_IMPORTED_MODULE_5__.loggerVer)(\"changeArcAngle..\");\n        var elem = this.repository.currentElement();\n        if (!elem) {\n            return;\n        }\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(elem)) {\n            return;\n        }\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(elem)) {\n            return;\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.ChangeArcAngle(elem, (2 * Math.PI) / 72));\n            this.drawAll();\n            return;\n        }\n    };\n    RDDraw.prototype.changeArcAngleMinus = function () {\n        var elem = this.repository.currentElement();\n        if (!elem) {\n            return;\n        }\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(elem)) {\n            return;\n        }\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(elem)) {\n            return;\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.ChangeArcAngle(elem, -(2 * Math.PI) / 72));\n            this.drawAll();\n            return;\n        }\n    };\n    RDDraw.prototype.changeArcEndAngle = function () {\n        var elem = this.repository.currentElement();\n        if (!elem) {\n            return;\n        }\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(elem)) {\n            return;\n        }\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(elem)) {\n            return;\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.ChangeArcEndAngle(elem, (2 * Math.PI) / 72));\n            this.drawAll();\n            return;\n        }\n    };\n    RDDraw.prototype.changeArcEndAngleMinus = function () {\n        var elem = this.repository.currentElement();\n        if (!elem) {\n            return;\n        }\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(elem)) {\n            return;\n        }\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(elem)) {\n            return;\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.ChangeArcEndAngle(elem, -(2 * Math.PI) / 72));\n            this.drawAll();\n            return;\n        }\n    };\n    RDDraw.prototype.changeScale = function () {\n        var elem = this.repository.currentElement();\n        if (!elem) {\n            return;\n        }\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(elem)) {\n            return;\n        }\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.ChangeScale(elem, 1.0));\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.ChangeScale(elem, 1.0));\n            this.drawAll();\n            return;\n        }\n    };\n    RDDraw.prototype.changeScaleDown = function () {\n        var elem = this.repository.currentElement();\n        if (!elem) {\n            return;\n        }\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(elem)) {\n            return;\n        }\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.ChangeScale(elem, -1.0));\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.ChangeScale(elem, -1.0));\n            this.drawAll();\n            return;\n        }\n    };\n    RDDraw.prototype.changeStyle = function () {\n        var elem = this.repository.currentElement();\n        if (!elem) {\n            return;\n        }\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(elem)) {\n            return;\n        }\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.ChangeStyle(elem));\n            this.drawAll();\n            return;\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(elem)) {\n            this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.ChangeStyle(elem));\n            this.drawAll();\n            return;\n        }\n    };\n    RDDraw.prototype.delete = function () {\n        var current = this.repository.currentElement();\n        if (!current) {\n            return;\n        }\n        this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.Delete(current));\n        this.drawAll();\n    };\n    RDDraw.prototype.select = function (point) {\n        if (this.drawMode == \"point\") {\n            this.putVertex(point);\n            this.drawAll();\n            return;\n        }\n        if (this.drawMode == \"line\") {\n            if (this.lineMode) {\n                this.putLine(point, false);\n                this.putVertex(point);\n                this.lineMode = undefined;\n                this.drawAll();\n                return;\n            }\n            this.lineMode = point;\n            this.putVertex(this.lineMode);\n            this.drawAll();\n            return;\n        }\n        if (this.drawMode == \"loop\") {\n            var current = this.repository.currentElement();\n            if (!current) {\n                this.putLoop(point.x, point.y);\n                this.drawAll();\n                return;\n            }\n            if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_2__.isLoop)(current)) {\n                var loop = new _Core_Loop__WEBPACK_IMPORTED_MODULE_2__.Loop();\n                loop.origin = point;\n                current.addLoop(loop);\n                this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetLoop(loop));\n                this.drawAll();\n                return;\n            }\n            if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_1__.isLine)(current)) {\n                var loop = new _Core_Loop__WEBPACK_IMPORTED_MODULE_2__.Loop();\n                loop.origin = current.to.add(current.directionUnit().multi(loop.radius * 2));\n                this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetLoop(loop));\n                this.drawAll();\n                return;\n            }\n            if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_4__.isVector)(current)) {\n                var loop = new _Core_Loop__WEBPACK_IMPORTED_MODULE_2__.Loop();\n                loop.origin = current;\n                this.repository.doCommand(new _RepositoryCommand__WEBPACK_IMPORTED_MODULE_8__.SetLoop(loop));\n                this.drawAll();\n                return;\n            }\n        }\n        if (this.drawMode == \"string\") {\n            this.setString(point.x, point.y);\n            this.drawAll();\n        }\n        if (this.drawMode == \"normal\") {\n            this.repository.select(point);\n            this.drawAll();\n        }\n    };\n    RDDraw.prototype.subSelect = function (point) {\n        if (this.drawMode == \"normal\") {\n            this.repository.subSelect(point);\n            this.drawAll();\n            return;\n        }\n        this.repository.select(point);\n        this.drawAll();\n    };\n    RDDraw.prototype.undo = function () {\n        (0,_looger__WEBPACK_IMPORTED_MODULE_5__.loggerVer)(\"undo\");\n        this.repository.undo();\n        this.drawAll();\n    };\n    RDDraw.prototype.redo = function () {\n        (0,_looger__WEBPACK_IMPORTED_MODULE_5__.loggerVer)(\"redo\");\n        this.repository.redo();\n        this.drawAll();\n    };\n    RDDraw.prototype.changeMode = function () {\n        if (this.drawMode == \"normal\") {\n            this.drawMode = \"line\";\n        }\n        else if (this.drawMode == \"line\") {\n            this.drawMode = \"loop\";\n        }\n        else if (this.drawMode == \"loop\") {\n            this.drawMode = \"normal\";\n        }\n        this.drawAll();\n    };\n    return RDDraw;\n}());\n\n\n\n//# sourceURL=webpack://rdfeyn/./src/UI/RDDraw.ts?");

/***/ }),

/***/ "./src/UI/RDRepository.ts":
/*!********************************!*\
  !*** ./src/UI/RDRepository.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RDRepository: () => (/* binding */ RDRepository)\n/* harmony export */ });\n/* harmony import */ var _Core_Line__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Core/Line */ \"./src/Core/Line.ts\");\n/* harmony import */ var _Core_Loop__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Core/Loop */ \"./src/Core/Loop.ts\");\n/* harmony import */ var _Core_MyString__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Core/MyString */ \"./src/Core/MyString.ts\");\n/* harmony import */ var _Core_Vector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Core/Vector */ \"./src/Core/Vector.ts\");\n/* harmony import */ var _looger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../looger */ \"./src/looger.ts\");\nvar __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\n\n\n\n\n\n/**\n * The repository of the drawing.\n * It has a list of elements, and it can save and load.\n * It can also get the current element.\n * It can also get all the vertex, loop, and line.\n * It can also get the current element.\n * It can also get the current sub element.\n * It can also set the current element.\n */\nvar RDRepository = /** @class */ (function () {\n    function RDRepository() {\n        this.vertexList = [];\n        this.loopList = [];\n        this.lineList = [];\n        this.currentIndex = undefined;\n        this.currentSubIndex = undefined;\n        this.elements = [];\n        this.idCount = 0;\n        this.history = [];\n        this.historyHead = 0; // 次に書き込むべき位置を指す\n    }\n    RDRepository.prototype.save = function () {\n        var saveData = {};\n        saveData[\"elements\"] = this.elements.map(function (e) { return e.save(); });\n        return JSON.stringify(saveData);\n    };\n    RDRepository.prototype.load = function (saveData) {\n        var saveJson = JSON.parse(saveData);\n        this.idCount = 0;\n        this.currentIndex = 0;\n        this.currentSubIndex = 0;\n        this.elements = this.loadElements(saveJson[\"elements\"]);\n        this.idCount = Math.max.apply(Math, this.elements.map(function (e) { return Math.floor(Number.parseFloat(e.id)); }));\n    };\n    RDRepository.prototype.loadElements = function (saveJsonElements) {\n        return saveJsonElements.flatMap(function (e) {\n            var json = JSON.parse(e);\n            var shape = json[\"shape\"];\n            if (!shape) {\n                return undefined;\n            }\n            switch (shape) {\n                case \"Line\":\n                    return (0,_Core_Line__WEBPACK_IMPORTED_MODULE_0__.makeLine)(json);\n                case \"Loop\":\n                    return (0,_Core_Loop__WEBPACK_IMPORTED_MODULE_1__.makeLoop)(json);\n                case \"Point\":\n                    return (0,_Core_Vector__WEBPACK_IMPORTED_MODULE_3__.makeVector)(json);\n                case \"String\":\n                    return (0,_Core_MyString__WEBPACK_IMPORTED_MODULE_2__.makeMyString)(json);\n            }\n        }).flatMap(function (e) { return e !== undefined ? [e] : []; }).flat();\n    };\n    RDRepository.prototype.getElement = function (id) {\n        return this.elements.find(function (elem) {\n            return elem.id == id;\n        });\n    };\n    RDRepository.prototype.setCurrentElement = function (elem) {\n        this.currentIndex = this.elements.findIndex(function (e) { return e.id === elem.id; });\n    };\n    RDRepository.prototype.setSubCurrentElement = function (elem) {\n        this.currentSubIndex = this.elements.findIndex(function (e) { return e.id === elem.id; });\n    };\n    RDRepository.prototype.currentElement = function () {\n        // loggerVer(\"currentElement:length:\"+this.elements.length)\n        // loggerVer(\"currentIndex:\"+this.currentIndex)\n        if (this.currentIndex != undefined &&\n            this.currentIndex < this.elements.length) {\n            return this.elements[this.currentIndex];\n        }\n        return undefined;\n    };\n    RDRepository.prototype.currentSubElement = function () {\n        if (this.currentSubIndex != undefined &&\n            this.currentSubIndex < this.elements.length) {\n            return this.elements[this.currentSubIndex];\n        }\n        return undefined;\n    };\n    RDRepository.prototype.getAllVertex = function () {\n        return this.vertexList;\n    };\n    RDRepository.prototype.getAllLoop = function () {\n        return this.loopList;\n    };\n    RDRepository.prototype.getAllLine = function () {\n        return this.lineList;\n    };\n    RDRepository.prototype.getAllElements = function () {\n        return this.elements;\n    };\n    RDRepository.prototype.deleteCurrentEelemnt = function () {\n        if (this.currentIndex == undefined) {\n            return;\n        }\n        var currentElem = this.currentElement();\n        if (!currentElem) {\n            return;\n        }\n        var nextCurrentIndex = this.currentIndex - 1;\n        if (nextCurrentIndex < 0) {\n            nextCurrentIndex = 0;\n        }\n        this.elements.splice(this.currentIndex, 1);\n        this.currentIndex = nextCurrentIndex;\n    };\n    RDRepository.prototype.doCommand = function (command) {\n        this.history[this.historyHead++] = command;\n        this.history.splice(this.historyHead); // headから先の枝を切る\n        command.action(this);\n    };\n    RDRepository.prototype.nextElem = function () {\n        (0,_looger__WEBPACK_IMPORTED_MODULE_4__.loggerVer)(\"nextElem\");\n        if (this.currentIndex == undefined) {\n            if (this.elements.length == 0) {\n                (0,_looger__WEBPACK_IMPORTED_MODULE_4__.loggerVer)(\"nextElem return\");\n                return;\n            }\n            this.currentIndex = -1;\n        }\n        this.currentIndex = this.currentIndex + 1;\n        if (this.currentIndex >= this.elements.length) {\n            this.currentIndex = 0;\n        }\n        (0,_looger__WEBPACK_IMPORTED_MODULE_4__.loggerVer)(\"currentIndex\" + this.currentIndex);\n    };\n    RDRepository.prototype.nextSubElem = function () {\n        if (this.currentSubIndex == undefined) {\n            if (this.elements.length == 0) {\n                return;\n            }\n            this.currentSubIndex = -1;\n        }\n        this.currentSubIndex = this.currentSubIndex + 1;\n        if (this.currentSubIndex >= this.elements.length) {\n            this.currentSubIndex = 0;\n        }\n    };\n    RDRepository.prototype.preElem = function () {\n        if (this.currentIndex == undefined) {\n            if (this.elements.length == 0) {\n                return;\n            }\n            this.currentIndex = +1;\n        }\n        this.currentIndex = this.currentIndex - 1;\n        if (this.currentIndex < 0) {\n            this.currentIndex =\n                this.elements.length != 0 ? this.elements.length - 1 : 0;\n        }\n    };\n    RDRepository.prototype.preSubElem = function () {\n        if (this.currentSubIndex == undefined) {\n            if (this.elements.length == 0) {\n                return;\n            }\n            this.currentSubIndex = +1;\n        }\n        this.currentSubIndex = this.currentSubIndex - 1;\n        if (this.currentSubIndex < 0) {\n            this.currentSubIndex =\n                this.elements.length != 0 ? this.elements.length - 1 : 0;\n        }\n    };\n    RDRepository.prototype.findMostNearElements = function (point, elements) {\n        var sorted = __spreadArray([], elements, true).sort(function (e1, e2) {\n            return e1.formalDistance(point) - e2.formalDistance(point);\n        });\n        if (sorted.length < 2) {\n            return sorted;\n        }\n        var elem = sorted[0];\n        return sorted.filter(function (e) { return e.formalDistance(point) === elem.formalDistance(point); });\n    };\n    RDRepository.prototype.select = function (point) {\n        var _a;\n        var elem = this.findElement(point, (_a = this.currentElement()) === null || _a === void 0 ? void 0 : _a.id);\n        if (elem) {\n            this.setCurrentElement(elem);\n        }\n    };\n    RDRepository.prototype.subSelect = function (point) {\n        var _a;\n        var elem = this.findElement(point, (_a = this.currentSubElement()) === null || _a === void 0 ? void 0 : _a.id);\n        if (elem) {\n            this.setSubCurrentElement(elem);\n        }\n    };\n    RDRepository.prototype.findElement = function (point, current_id) {\n        var nearElements = this.findMostNearElements(point, this.elements);\n        if (nearElements.length === 0) {\n            return;\n        }\n        function next(elems, index) {\n            if (index === undefined || index < 0) {\n                return elems[0];\n            }\n            if (index >= elems.length) {\n                return elems[0];\n            }\n            return elems[index];\n        }\n        var indexOfCurrent = nearElements.findIndex(function (e) { return e.id === current_id; });\n        var nearElement = next(nearElements, indexOfCurrent);\n        return nearElement;\n    };\n    RDRepository.prototype.clearSelectMode = function () {\n        this.currentIndex = undefined;\n        this.currentSubIndex = undefined;\n    };\n    RDRepository.prototype.changeSelect = function () {\n        var currentIndex = this.currentIndex;\n        this.currentIndex = this.currentSubIndex;\n        this.currentSubIndex = currentIndex;\n    };\n    RDRepository.prototype.undo = function () {\n        if (this.historyHead <= 0) {\n            return;\n        }\n        this.history[--this.historyHead].unaction(this);\n    };\n    RDRepository.prototype.redo = function () {\n        if (this.historyHead >= this.history.length) {\n            return;\n        }\n        this.history[this.historyHead++].action(this);\n    };\n    return RDRepository;\n}());\n\n\n\n//# sourceURL=webpack://rdfeyn/./src/UI/RDRepository.ts?");

/***/ }),

/***/ "./src/UI/RepositoryCommand.ts":
/*!*************************************!*\
  !*** ./src/UI/RepositoryCommand.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArrowToggle: () => (/* binding */ ArrowToggle),\n/* harmony export */   ChangeArcAngle: () => (/* binding */ ChangeArcAngle),\n/* harmony export */   ChangeArcEndAngle: () => (/* binding */ ChangeArcEndAngle),\n/* harmony export */   ChangeScale: () => (/* binding */ ChangeScale),\n/* harmony export */   ChangeStyle: () => (/* binding */ ChangeStyle),\n/* harmony export */   ChangeType: () => (/* binding */ ChangeType),\n/* harmony export */   Delete: () => (/* binding */ Delete),\n/* harmony export */   Fill: () => (/* binding */ Fill),\n/* harmony export */   Move: () => (/* binding */ Move),\n/* harmony export */   MoveAbsolute: () => (/* binding */ MoveAbsolute),\n/* harmony export */   Rotation: () => (/* binding */ Rotation),\n/* harmony export */   SetLine: () => (/* binding */ SetLine),\n/* harmony export */   SetLoop: () => (/* binding */ SetLoop),\n/* harmony export */   SetString: () => (/* binding */ SetString),\n/* harmony export */   SetVertex: () => (/* binding */ SetVertex)\n/* harmony export */ });\n/* harmony import */ var _Core_Line__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Core/Line */ \"./src/Core/Line.ts\");\n/* harmony import */ var _Core_Loop__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Core/Loop */ \"./src/Core/Loop.ts\");\n/* harmony import */ var _Core_Vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Core/Vector */ \"./src/Core/Vector.ts\");\n\n\n\nvar SetVertex = /** @class */ (function () {\n    function SetVertex(vertex) {\n        this.vertex = vertex;\n        this.copyVertex = vertex.copy();\n    }\n    SetVertex.prototype.action = function (repo) {\n        repo.vertexList.push(this.copyVertex);\n        repo.elements.push(this.copyVertex);\n        repo.currentIndex = repo.elements.length - 1;\n    };\n    SetVertex.prototype.unaction = function (repo) {\n        repo.vertexList.splice(repo.vertexList.indexOf(this.copyVertex), 1);\n        repo.elements.splice(repo.elements.indexOf(this.copyVertex), 1);\n    };\n    return SetVertex;\n}());\n\nvar SetLine = /** @class */ (function () {\n    function SetLine(line) {\n        this.line = line;\n        this.copyLine = line.copy();\n    }\n    SetLine.prototype.action = function (repo) {\n        repo.lineList.push(this.copyLine);\n        repo.elements.push(this.copyLine);\n        repo.currentIndex = repo.elements.length - 1;\n    };\n    SetLine.prototype.unaction = function (repo) {\n        repo.lineList.splice(repo.lineList.indexOf(this.copyLine), 1);\n        repo.elements.splice(repo.elements.indexOf(this.copyLine), 1);\n    };\n    return SetLine;\n}());\n\nvar SetString = /** @class */ (function () {\n    function SetString(str) {\n        this.mystring = str;\n        this.copyMyString = str.copy();\n    }\n    SetString.prototype.action = function (repo) {\n        repo.elements.push(this.copyMyString);\n        repo.currentIndex = repo.elements.length - 1;\n    };\n    SetString.prototype.unaction = function (repo) {\n        repo.elements.splice(repo.elements.indexOf(this.copyMyString), 1);\n    };\n    return SetString;\n}());\n\nvar SetLoop = /** @class */ (function () {\n    function SetLoop(loop) {\n        this.loop = loop;\n        this.copyLoop = loop.copy();\n    }\n    SetLoop.prototype.action = function (repo) {\n        repo.loopList.push(this.copyLoop);\n        repo.elements.push(this.copyLoop);\n        repo.currentIndex = repo.elements.length - 1;\n    };\n    SetLoop.prototype.unaction = function (repo) {\n        repo.loopList.splice(repo.loopList.indexOf(this.copyLoop), 1);\n        repo.elements.splice(repo.elements.indexOf(this.copyLoop), 1);\n    };\n    return SetLoop;\n}());\n\nvar Delete = /** @class */ (function () {\n    function Delete(target) {\n        this.target = target;\n    }\n    Delete.prototype.action = function (repo) {\n        repo.elements.splice(repo.elements.indexOf(this.target), 1);\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_2__.isVector)(this.target)) {\n            repo.vertexList.splice(repo.vertexList.indexOf(this.target), 1);\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_1__.isLoop)(this.target)) {\n            repo.loopList.splice(repo.loopList.indexOf(this.target), 1);\n        }\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_0__.isLine)(this.target)) {\n            repo.lineList.splice(repo.lineList.indexOf(this.target), 1);\n        }\n    };\n    Delete.prototype.unaction = function (repo) {\n        repo.elements.push(this.target);\n        if ((0,_Core_Vector__WEBPACK_IMPORTED_MODULE_2__.isVector)(this.target)) {\n            repo.vertexList.push(this.target);\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_1__.isLoop)(this.target)) {\n            repo.loopList.push(this.target);\n        }\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_0__.isLine)(this.target)) {\n            repo.lineList.push(this.target);\n        }\n    };\n    return Delete;\n}());\n\nvar Move = /** @class */ (function () {\n    function Move(target, delta) {\n        this.target = target;\n        this.delta = delta;\n        this.before = JSON.parse(JSON.stringify(target)); // 深いコピー\n        Object.defineProperties(this.before, Object.getOwnPropertyDescriptors(target));\n    }\n    Move.prototype.action = function (repo) {\n        this.target.move(this.delta);\n    };\n    Move.prototype.unaction = function (repo) {\n        // this.target.move(this.delta.multi(-1.0));  // 誤差が蓄積する恐れ\n        Object.assign(this.target, this.before);\n    };\n    return Move;\n}());\n\nvar MoveAbsolute = /** @class */ (function () {\n    function MoveAbsolute(target, location) {\n        this.target = target;\n        this.location = location;\n        this.before = JSON.parse(JSON.stringify(target)); // 深いコピー\n        Object.defineProperties(this.before, Object.getOwnPropertyDescriptors(target));\n    }\n    MoveAbsolute.prototype.action = function (repo) {\n        this.target.moveAbsolute(this.location);\n    };\n    MoveAbsolute.prototype.unaction = function (repo) {\n        Object.assign(this.target, this.before);\n    };\n    return MoveAbsolute;\n}());\n\nvar Rotation = /** @class */ (function () {\n    function Rotation(target, delta) {\n        this.target = target;\n        this.delta = delta;\n        this.before = JSON.parse(JSON.stringify(target)); // 深いコピー\n        Object.defineProperties(this.before, Object.getOwnPropertyDescriptors(target));\n    }\n    Rotation.prototype.action = function (repo) {\n        this.target.rotation(this.delta);\n    };\n    Rotation.prototype.unaction = function (repo) {\n        // this.target.rotation(-this.delta);\n        Object.assign(this.target, this.before);\n    };\n    return Rotation;\n}());\n\nvar ChangeScale = /** @class */ (function () {\n    function ChangeScale(target, delta) {\n        this.target = target;\n        this.delta = delta;\n        this.before = JSON.parse(JSON.stringify(target)); // 深いコピー\n        Object.defineProperties(this.before, Object.getOwnPropertyDescriptors(target));\n    }\n    ChangeScale.prototype.action = function (repo) {\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_0__.isLine)(this.target)) {\n            this.target.to = this.target.to.add(this.target.directionUnit().multi(this.delta));\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_1__.isLoop)(this.target)) {\n            this.target.setRadius(this.target.radius + this.delta * 1);\n        }\n    };\n    ChangeScale.prototype.unaction = function (repo) {\n        // if (isLine(this.target)) {\n        //   this.target.to = this.target.to.minus(this.target.directionUnit().multi(this.delta));\n        // }\n        // if (isLoop(this.target)) {\n        //   this.target.setRadius(this.target.radius - this.delta * 1);\n        // }\n        Object.assign(this.target, this.before);\n    };\n    return ChangeScale;\n}());\n\nvar ChangeArcAngle = /** @class */ (function () {\n    function ChangeArcAngle(target, delta) {\n        this.target = target;\n        this.delta = delta;\n        this.angleBefore = target.loopBeginAngle;\n    }\n    ChangeArcAngle.prototype.action = function (repo) {\n        this.target.setLoopBeginAngle(this.target.loopBeginAngle + this.delta);\n    };\n    ChangeArcAngle.prototype.unaction = function (repo) {\n        // this.target.setLoopBeginAngle(this.target.loopBeginAngle - this.delta);\n        this.target.setLoopBeginAngle(this.angleBefore);\n    };\n    return ChangeArcAngle;\n}());\n\nvar ChangeArcEndAngle = /** @class */ (function () {\n    function ChangeArcEndAngle(target, delta) {\n        this.target = target;\n        this.delta = delta;\n        this.angleBefore = target.loopEndAngle;\n    }\n    ChangeArcEndAngle.prototype.action = function (repo) {\n        this.target.setLoopEndAngle(this.target.loopEndAngle + this.delta);\n    };\n    ChangeArcEndAngle.prototype.unaction = function (repo) {\n        // this.target.setLoopEndAngle(this.target.loopEndAngle - this.delta);\n        this.target.setLoopEndAngle(this.angleBefore);\n    };\n    return ChangeArcEndAngle;\n}());\n\nvar Fill = /** @class */ (function () {\n    function Fill(target) {\n        this.target = target;\n    }\n    Fill.prototype.action = function (repo) {\n        this.target.fill = !this.target.fill;\n    };\n    Fill.prototype.unaction = function (repo) {\n        this.action(repo);\n    };\n    return Fill;\n}());\n\nvar ArrowToggle = /** @class */ (function () {\n    function ArrowToggle(target) {\n        this.target = target;\n    }\n    ArrowToggle.prototype.action = function (repo) {\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_0__.isLine)(this.target)) {\n            this.target.allow = !this.target.allow;\n        }\n    };\n    ArrowToggle.prototype.unaction = function (repo) {\n        this.action(repo);\n    };\n    return ArrowToggle;\n}());\n\nvar ChangeType = /** @class */ (function () {\n    function ChangeType(target) {\n        this.target = target;\n    }\n    ChangeType.prototype.action = function (repo) {\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_0__.isLine)(this.target)) {\n            this.target.toggle();\n        }\n    };\n    ChangeType.prototype.unaction = function (repo) {\n        this.action(repo);\n    };\n    return ChangeType;\n}());\n\nvar ChangeStyle = /** @class */ (function () {\n    function ChangeStyle(target) {\n        this.styleBefore = \"normal\";\n        this.styleAfter = \"normal\";\n        this.target = target;\n        this.styleBefore = target.style;\n        if ((0,_Core_Line__WEBPACK_IMPORTED_MODULE_0__.isLine)(target)) {\n            if (this.styleBefore == \"normal\") {\n                this.styleAfter = \"dash\";\n            }\n            if (this.styleBefore == \"dash\") {\n                this.styleAfter = \"wave\";\n            }\n            if (this.styleBefore == \"wave\") {\n                this.styleAfter = \"coil\";\n            }\n            if (this.styleBefore == \"coil\") {\n                this.styleAfter = \"double\";\n            }\n            if (this.styleBefore == \"double\") {\n                this.styleAfter = \"normal\";\n            }\n        }\n        if ((0,_Core_Loop__WEBPACK_IMPORTED_MODULE_1__.isLoop)(target)) {\n            if (this.styleBefore == \"normal\") {\n                this.styleAfter = \"dash\";\n            }\n            if (this.styleBefore == \"dash\") {\n                this.styleAfter = \"wave\";\n            }\n            if (this.styleBefore == \"wave\") {\n                this.styleAfter = \"coil\";\n            }\n            if (this.styleBefore == \"coil\") {\n                this.styleAfter = \"normal\";\n            }\n        }\n    }\n    ChangeStyle.prototype.action = function (repo) {\n        this.target.style = this.styleAfter;\n    };\n    ChangeStyle.prototype.unaction = function (repo) {\n        this.target.style = this.styleBefore;\n    };\n    return ChangeStyle;\n}());\n\n\n\n//# sourceURL=webpack://rdfeyn/./src/UI/RepositoryCommand.ts?");

/***/ }),

/***/ "./src/UI/UIColor.ts":
/*!***************************!*\
  !*** ./src/UI/UIColor.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getColor: () => (/* binding */ getColor)\n/* harmony export */ });\nfunction getColor(color) {\n    if (color == \"normal\") {\n        return \"rgb(0,0,0)\";\n    }\n    if (color == \"select\") {\n        return \"rgb(255,0,0)\";\n    }\n    if (color == \"sub\") {\n        return \"rgb(0,255,0)\";\n    }\n    return \"rgb(0,0,0)\";\n}\n\n\n//# sourceURL=webpack://rdfeyn/./src/UI/UIColor.ts?");

/***/ }),

/***/ "./src/UI/draw.ts":
/*!************************!*\
  !*** ./src/UI/draw.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   draw: () => (/* binding */ draw),\n/* harmony export */   drawAllow: () => (/* binding */ drawAllow),\n/* harmony export */   drawCoilLine: () => (/* binding */ drawCoilLine),\n/* harmony export */   drawCoilLoop: () => (/* binding */ drawCoilLoop),\n/* harmony export */   drawDoubleLine: () => (/* binding */ drawDoubleLine),\n/* harmony export */   drawLine: () => (/* binding */ drawLine),\n/* harmony export */   drawLoop: () => (/* binding */ drawLoop),\n/* harmony export */   drawNormalLine: () => (/* binding */ drawNormalLine),\n/* harmony export */   drawPoint: () => (/* binding */ drawPoint),\n/* harmony export */   drawWaveLine: () => (/* binding */ drawWaveLine),\n/* harmony export */   drawWaveLoop: () => (/* binding */ drawWaveLoop)\n/* harmony export */ });\n/* harmony import */ var _Config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Config */ \"./src/Config.ts\");\n/* harmony import */ var _Core_Group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Core/Group */ \"./src/Core/Group.ts\");\n/* harmony import */ var _Core_Line__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Core/Line */ \"./src/Core/Line.ts\");\n/* harmony import */ var _Core_TextPosition__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Core/TextPosition */ \"./src/Core/TextPosition.ts\");\n/* harmony import */ var _Core_Vector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Core/Vector */ \"./src/Core/Vector.ts\");\n\n\n\n\n\n/**\n * draw is the main function to draw an element.\n * @param drawContext the draw context\n * @param elem the element to draw\n * @param exportType the export type\n * @param color the color\n */\nfunction draw(drawContext, elem, exportType, color) {\n    if (color === void 0) { color = \"normal\"; }\n    if (elem.shape == \"Line\") {\n        drawLine(drawContext, elem, exportType, color);\n        return;\n    }\n    if (elem.shape == \"Loop\") {\n        drawLoop(drawContext, elem, exportType, color);\n        return;\n    }\n    if (elem.shape == \"Point\") {\n        drawPoint(drawContext, elem, exportType, color);\n        return;\n    }\n    if (elem.shape == \"String\") {\n        drawText(drawContext, elem, exportType, color);\n        return;\n    }\n    if ((0,_Core_Group__WEBPACK_IMPORTED_MODULE_1__.isGroup)(elem)) {\n        elem.elements.forEach(function (elem) {\n            draw(drawContext, elem, exportType, color);\n        });\n        return;\n    }\n}\n/**\n * draw DoubleLine\n */\nfunction drawDoubleLine(drawContext, line, exportType, color) {\n    if (color === void 0) { color = \"normal\"; }\n    drawContext.beginPath();\n    drawContext.setStrokeColor(color);\n    var linestyle = line.style;\n    var deltaVec = line.vector().rotation(Math.PI / 2).unit().multi(1 / 10);\n    drawContext.moveTo(line.origin.x + deltaVec.x, line.origin.y + deltaVec.y);\n    drawContext.lineTo(line.to.x + deltaVec.x, line.to.y + deltaVec.y, linestyle);\n    drawContext.stroke();\n    drawContext.closePath();\n    // drawContext.setLineDash([])\n    drawContext.moveTo(line.origin.x - deltaVec.x, line.origin.y - deltaVec.y);\n    drawContext.lineTo(line.to.x - deltaVec.x, line.to.y - deltaVec.y, linestyle);\n    // context.arc(100, 10, 50, 0, Math.PI * 2)\n    drawContext.stroke();\n    if (line.allow) {\n        drawAllow(drawContext, line, exportType);\n    }\n    if (line.label) {\n        var diff = 1.0 + line.labelDiff;\n        var pos = line.center().add(line\n            .directionUnit()\n            .rotation(Math.PI / 2)\n            .multi(diff));\n        var position = (0,_Core_TextPosition__WEBPACK_IMPORTED_MODULE_3__.textPosition)(line.label, pos, _Config__WEBPACK_IMPORTED_MODULE_0__.config);\n        drawContext.fillText(line.label, position.x, position.y);\n    }\n    drawContext.closePath();\n    // drawContext.setLineDash([])\n}\n/**\n * draw a line\n */\nfunction drawNormalLine(drawContext, line, exportType, color) {\n    if (color === void 0) { color = \"normal\"; }\n    drawContext.beginPath();\n    drawContext.setStrokeColor(color);\n    var linestyle = line.style;\n    drawContext.moveTo(line.origin.x, line.origin.y);\n    drawContext.lineTo(line.to.x, line.to.y, linestyle);\n    // context.arc(100, 10, 50, 0, Math.PI * 2)\n    drawContext.stroke();\n    if (line.allow) {\n        drawAllow(drawContext, line, exportType);\n    }\n    if (line.label) {\n        var diff = 1.0 + line.labelDiff;\n        var pos = line.center().add(line\n            .directionUnit()\n            .rotation(Math.PI / 2)\n            .multi(diff));\n        var position = (0,_Core_TextPosition__WEBPACK_IMPORTED_MODULE_3__.textPosition)(line.label, pos, _Config__WEBPACK_IMPORTED_MODULE_0__.config);\n        drawContext.fillText(line.label, position.x, position.y);\n    }\n    drawContext.closePath();\n    // drawContext.setLineDash([])\n}\nfunction drawWaveLine(drawContext, line, exportType, color) {\n    if (color === void 0) { color = \"normal\"; }\n    drawContext.beginPath();\n    var origin = line.origin;\n    var lineto = line.to;\n    var unitVec = line.directionUnit();\n    var perpVec = unitVec.rotation(Math.PI / 2);\n    drawContext.setStrokeColor(color);\n    // context.arc(100, 10, 50, 0, Math.PI * 2)\n    var lineSyle = \"normal\";\n    if (line.style == \"dash\") {\n        lineSyle = \"dash\";\n    }\n    drawContext.moveTo(origin.x, origin.y);\n    for (var l = 0; l < line.length(); l += 0.1) {\n        var x = origin.x + unitVec.x * l + (perpVec.x * Math.sin(l * 5) * 3) / 15;\n        var y = origin.y + unitVec.y * l + (perpVec.y * Math.sin(l * 5) * 3) / 15;\n        // loggerVer(`draw ${l} ${x} ${y}`);\n        drawContext.lineTo(x, y, lineSyle);\n        drawContext.moveTo(x, y);\n        drawContext.stroke();\n    }\n    if (line.allow) {\n        drawAllow(drawContext, line, exportType);\n    }\n    if (line.label) {\n        var diff = 1.0 + line.labelDiff;\n        var pos = line.center().add(line\n            .directionUnit()\n            .rotation(Math.PI / 2)\n            .multi(diff));\n        var position = (0,_Core_TextPosition__WEBPACK_IMPORTED_MODULE_3__.textPosition)(line.label, pos, _Config__WEBPACK_IMPORTED_MODULE_0__.config);\n        drawContext.fillText(line.label, position.x, position.y);\n    }\n    drawContext.closePath();\n    // drawContext.setLineDash([])\n}\n/**\n * draw a coil line\n */\nfunction drawCoilLine(drawContext, line, exportType, color) {\n    if (color === void 0) { color = \"normal\"; }\n    drawContext.setStrokeColor(color);\n    var lineStyle = \"normal\";\n    if (line.style == \"dash\") {\n        lineStyle = \"dash\";\n    }\n    var pathLength = line.length();\n    // 経路とその接線ベクトルの媒介変数表示\n    // 要素の種類によって決まる関数\n    var x;\n    var y;\n    var dx;\n    var dy;\n    {\n        x = function (s) {\n            return line.origin.x + ((line.to.x - line.origin.x) * s) / pathLength;\n        };\n        y = function (s) {\n            return line.origin.y + ((line.to.y - line.origin.y) * s) / pathLength;\n        };\n        dx = function (s) {\n            return line.directionUnit().x;\n        };\n        dy = function (s) {\n            return line.directionUnit().y;\n        };\n    }\n    // 線のスタイルとpathLengthによって決まる関数\n    var u;\n    var v;\n    {\n        // コイル線のパラメータ\n        var segmentLength = 1.0;\n        var aspect_1 = 0.9;\n        var amplitude_1 = 0.5;\n        // 経路の長さが1波長(segmentLength)よりも短い場合、線の装飾をしない。\n        if (pathLength < segmentLength) {\n            u = v = function (s) {\n                return 0;\n            };\n        }\n        else {\n            // コイルの巻き数\n            var n_1 = Math.floor(pathLength / segmentLength);\n            // 弧長sから位相tへ\n            var t_1 = function (s) {\n                return (s / pathLength) * (n_1 - 1 / 2) * 2 * Math.PI;\n            };\n            u = function (s) {\n                // 第2項は両端を閉じるための補正。経路の中間点で0。\n                return (aspect_1 * amplitude_1 * Math.cos(Math.PI - t_1(s)) -\n                    aspect_1 * amplitude_1 * ((2 * s) / pathLength - 1));\n            };\n            v = function (s) {\n                return amplitude_1 * Math.sin(Math.PI - t_1(s));\n            };\n        }\n    }\n    var resolution = 32; // 1巻きのコイルを32本の線分で描く程度\n    var ds, begin, end;\n    var f;\n    var g;\n    f = function (s) {\n        return x(s) + (u(s) * dx(s) - v(s) * dy(s));\n    };\n    g = function (s) {\n        return y(s) + (u(s) * dy(s) + v(s) * dx(s));\n    };\n    ds = (2 * Math.PI * 0.5) /*amplitude*/ / resolution;\n    begin = 0;\n    end = pathLength;\n    drawContext.beginPath();\n    {\n        var x_1, y_1, s = void 0;\n        (x_1 = f(begin)), (y_1 = g(begin));\n        drawContext.moveTo(x_1, y_1);\n        for (s = begin; s < end; s += ds) {\n            (x_1 = f(s)), (y_1 = g(s));\n            drawContext.lineTo(x_1, y_1, lineStyle);\n            drawContext.moveTo(x_1, y_1);\n        }\n        (x_1 = f(end)), (y_1 = g(end));\n        drawContext.lineTo(x_1, y_1, lineStyle);\n    }\n    drawContext.stroke();\n    drawContext.closePath();\n    if (line.allow) {\n        drawAllow(drawContext, line, exportType);\n    }\n    if (line.label) {\n        var diff = 1.0 + line.labelDiff;\n        var pos = line.center().add(line\n            .directionUnit()\n            .rotation(Math.PI / 2)\n            .multi(diff));\n        var position = (0,_Core_TextPosition__WEBPACK_IMPORTED_MODULE_3__.textPosition)(line.label, pos, _Config__WEBPACK_IMPORTED_MODULE_0__.config);\n        drawContext.fillText(line.label, position.x, position.y);\n    }\n    drawContext.closePath();\n    // drawContext.setLineDash([])\n}\n/**\n * draw line\n */\nfunction drawLine(drawContext, line, exportType, color) {\n    if (color === void 0) { color = \"normal\"; }\n    if (line.style == \"wave\") {\n        ///MARK: not good\n        if (exportType == \"canvas\" || exportType == \"svg\") {\n            drawWaveLine(drawContext, line, exportType, color);\n            return;\n        }\n    }\n    if (line.style == \"coil\") {\n        ///MARK: not good\n        if (exportType == \"canvas\" || exportType == \"svg\") {\n            drawCoilLine(drawContext, line, exportType, color);\n            return;\n        }\n    }\n    if (line.style == \"double\") {\n        drawDoubleLine(drawContext, line, exportType, color);\n        return;\n    }\n    drawNormalLine(drawContext, line, exportType, color);\n}\n/**\n * draw allow\n */\nfunction drawAllow(drawContext, line, exportType, color) {\n    if (color === void 0) { color = \"normal\"; }\n    var center = line.center();\n    var front = center.add(line.directionUnit().multi(0.4));\n    var tail1 = center.minus(line\n        .directionUnit()\n        .rotation(Math.PI / 2)\n        .multi(0.4));\n    var tail2 = center.add(line\n        .directionUnit()\n        .rotation(Math.PI / 2)\n        .multi(0.4));\n    drawContext.beginPath();\n    drawContext.setStrokeColor(color);\n    drawContext.moveTo(front.x, front.y);\n    drawContext.lineTo(tail1.x, tail1.y, \"normal\");\n    drawContext.lineTo(tail2.x, tail2.y, \"normal\");\n    drawContext.closePath();\n    // context.arc(100, 10, 50, 0, Math.PI * 2)\n    drawContext.stroke();\n}\n/**\n * draw wave loop\n */\nfunction drawWaveLoop(drawContext, loop, exportType, color) {\n    // drawContext.beginPath()\n    if (color === void 0) { color = \"normal\"; }\n    var origin = loop.origin;\n    var radius = loop.radius;\n    var beginAngle = loop.loopBeginAngle;\n    var endAngle = loop.loopEndAngle;\n    var segmentNum = 360 * (radius / 2);\n    var segmentAngleWith = (Math.PI * 2) / segmentNum;\n    var snakeNum = 12;\n    var amplitude = 0.1 * radius;\n    if (beginAngle < 0) {\n        beginAngle += Math.PI * 2;\n    }\n    if (beginAngle > Math.PI * 2) {\n        beginAngle -= Math.PI * 2;\n    }\n    if (endAngle < 0) {\n        endAngle += Math.PI * 2;\n    }\n    if (endAngle > Math.PI * 2) {\n        endAngle -= Math.PI * 2;\n    }\n    if (beginAngle > endAngle) {\n        endAngle += Math.PI * 2;\n    }\n    for (var angle = beginAngle; angle < endAngle; angle = angle + segmentAngleWith) {\n        var unitVec = new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(1, 0).rotation(angle);\n        var unitVec2 = new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(1, 0).rotation(angle + segmentAngleWith);\n        var snake = amplitude * Math.sin(angle * snakeNum);\n        // let perpVec = unitVec.rotation(Math.PI / 2)\n        var startPoint = origin.add(unitVec.multi(radius + snake));\n        var endPoint = origin.add(unitVec2.multi(radius + snake));\n        var line = new _Core_Line__WEBPACK_IMPORTED_MODULE_2__.Line();\n        line.style = \"normal\";\n        line.origin = startPoint;\n        line.to = endPoint;\n        line.allow = false;\n        drawLine(drawContext, line, exportType, color);\n    }\n    // drawContext.setStrokeColor(color)\n    // // context.arc(100, 10, 50, 0, Math.PI * 2)\n    // let lineSyle: LineStyle = \"normal\"\n    // if (line.style == \"dash\") {\n    //     lineSyle = \"dash\"\n    // }\n    // drawContext.moveTo(origin.x, origin.y)\n    // for (let l = 0; l < line.length(); l += 0.1) {\n    //     let x = origin.x + unitVec.x * l + perpVec.x * Math.sin(l * 5) * 3 / 15\n    //     let y = origin.y + unitVec.y * l + perpVec.y * Math.sin(l * 5) * 3 / 15\n    //     loggerVer(`draw ${l} ${x} ${y}`)\n    //     drawContext.lineTo(x, y, lineSyle)\n    //     drawContext.moveTo(x, y)\n    //     drawContext.stroke()\n    // }\n    // if (line.allow) {\n    //     drawAllow(line, exportType)\n    // }\n    // drawContext.closePath()\n    // drawContext.setLineDash([])\n}\n/**\n * draw coil loop\n */\nfunction drawCoilLoop(drawContext, loop, exportType, color) {\n    if (color === void 0) { color = \"normal\"; }\n    var beginAngle = loop.loopBeginAngle;\n    var endAngle = loop.loopEndAngle;\n    if (beginAngle < 0) {\n        beginAngle += Math.PI * 2;\n    }\n    if (beginAngle > Math.PI * 2) {\n        beginAngle -= Math.PI * 2;\n    }\n    if (endAngle < 0) {\n        endAngle += Math.PI * 2;\n    }\n    if (endAngle > Math.PI * 2) {\n        endAngle -= Math.PI * 2;\n    }\n    if (beginAngle > endAngle) {\n        endAngle += Math.PI * 2;\n    }\n    drawContext.setStrokeColor(color);\n    var lineSyle = \"normal\";\n    if (loop.style == \"dash\") {\n        lineSyle = \"dash\";\n    }\n    var pathLength = loop.radius * (endAngle - beginAngle);\n    // 経路とその接線ベクトルの媒介変数表示\n    // 要素の種類によって決まる関数\n    var x;\n    var y;\n    var dx;\n    var dy;\n    {\n        // 弧長sから中心角angleへ\n        var angle_1 = function (s) {\n            return s / loop.radius + beginAngle;\n        };\n        x = function (s) {\n            return loop.radius * Math.cos(angle_1(s)) + loop.origin.x;\n        };\n        y = function (s) {\n            return loop.radius * Math.sin(angle_1(s)) + loop.origin.y;\n        };\n        dx = function (s) {\n            return Math.cos(angle_1(s) + Math.PI / 2);\n        };\n        dy = function (s) {\n            return Math.sin(angle_1(s) + Math.PI / 2);\n        };\n    }\n    // 線のスタイルとpathLengthによって決まる関数\n    var u;\n    var v;\n    {\n        // コイル線のパラメータ\n        var segmentLength = 1.0;\n        var aspect_2 = 0.9;\n        var amplitude_2 = 0.5;\n        // 経路の長さが1波長(segmentLength)よりも短い場合、線の装飾をしない。\n        if (pathLength < segmentLength) {\n            u = v = function (s) {\n                return 0;\n            };\n        }\n        else {\n            // コイルの巻き数\n            var n_2 = Math.floor(pathLength / segmentLength);\n            // 弧長sから位相tへ\n            var t_2 = function (s) {\n                return (s / pathLength) * (n_2 - 1 / 2) * 2 * Math.PI;\n            };\n            u = function (s) {\n                // 第2項は両端を閉じるための補正。経路の中間点で0。\n                return (aspect_2 * amplitude_2 * Math.cos(Math.PI - t_2(s)) -\n                    aspect_2 * amplitude_2 * ((2 * s) / pathLength - 1));\n            };\n            v = function (s) {\n                return amplitude_2 * Math.sin(Math.PI - t_2(s));\n            };\n        }\n    }\n    var resolution = 32; // 1巻きのコイルを32本の線分で描く程度\n    var ds, begin, end;\n    var f;\n    var g;\n    f = function (s) {\n        return x(s) + (u(s) * dx(s) - v(s) * dy(s));\n    };\n    g = function (s) {\n        return y(s) + (u(s) * dy(s) + v(s) * dx(s));\n    };\n    ds = (2 * Math.PI * 0.5) /*amplitude*/ / resolution;\n    begin = 0;\n    end = pathLength;\n    drawContext.beginPath();\n    {\n        var x_2, y_2, s = void 0;\n        (x_2 = f(begin)), (y_2 = g(begin));\n        drawContext.moveTo(x_2, y_2);\n        for (s = begin; s < end; s += ds) {\n            (x_2 = f(s)), (y_2 = g(s));\n            drawContext.lineTo(x_2, y_2, lineSyle);\n            drawContext.moveTo(x_2, y_2);\n        }\n        (x_2 = f(end)), (y_2 = g(end));\n        drawContext.lineTo(x_2, y_2, lineSyle);\n    }\n    drawContext.stroke();\n    drawContext.closePath();\n    /*\n      // 基準線\n      f = x\n      g = y\n      drawContext.beginPath()\n      {\n          let x: number, y: number, s: number\n  \n          x = f(begin), y = g(begin)\n          drawContext.moveTo(x, y)\n          for (s = begin; s < end; s += ds) {\n              x = f(s), y = g(s)\n              drawContext.lineTo(x, y, lineSyle)\n              drawContext.moveTo(x, y)\n          }\n          x = f(end), y = g(end)\n          drawContext.lineTo(x, y, lineSyle)\n      }\n      drawContext.stroke()\n      drawContext.closePath()\n  */\n}\n/**\n * draw a loop\n */\nfunction drawLoop(drawContext, loop, exportType, color) {\n    if (color === void 0) { color = \"normal\"; }\n    if (loop.style == \"wave\") {\n        ///MARK: not good\n        if (exportType == \"canvas\" || exportType == \"svg\") {\n            drawWaveLoop(drawContext, loop, exportType, color);\n            return;\n        }\n    }\n    if (loop.style == \"coil\") {\n        ///MARK: not good\n        if (exportType == \"canvas\" || exportType == \"svg\") {\n            drawCoilLoop(drawContext, loop, exportType, color);\n            return;\n        }\n    }\n    drawContext.beginPath();\n    drawContext.setStrokeColor(color);\n    drawContext.setFillColor(color);\n    var lineStyle = \"normal\";\n    if (loop.style == \"dash\") {\n        lineStyle = \"dash\";\n    }\n    if (loop.style == \"wave\") {\n        lineStyle = \"wave\";\n    }\n    if (loop.style == \"coil\") {\n        lineStyle = \"coil\";\n    }\n    drawContext.arc(loop.origin.x, loop.origin.y, loop.radius, loop.loopBeginAngle, loop.loopEndAngle, lineStyle, loop.fill);\n    drawContext.stroke();\n    if (loop.label) {\n        var position = (0,_Core_TextPosition__WEBPACK_IMPORTED_MODULE_3__.textPosition)(loop.label, loop.origin, _Config__WEBPACK_IMPORTED_MODULE_0__.config);\n        drawContext.fillText(loop.label, position.x, position.y);\n    }\n    if (loop.labels) {\n        loop.labels.forEach(function (lab) {\n            var diff = 0.5 + lab.diff;\n            var pos = loop.origin.add(new _Core_Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(0, -1).multi(loop.radius + diff).rotation(lab.angle));\n            var position = (0,_Core_TextPosition__WEBPACK_IMPORTED_MODULE_3__.textPosition)(lab.label, pos, _Config__WEBPACK_IMPORTED_MODULE_0__.config);\n            drawContext.fillText(lab.label, position.x, position.y);\n        });\n    }\n    drawContext.closePath();\n    // drawContext.setLineDash([])\n}\n/**\n * draw point\n */\nfunction drawPoint(drawContext, point, exportType, color) {\n    if (color === void 0) { color = \"normal\"; }\n    var x = point.x;\n    var y = point.y;\n    drawContext.beginPath();\n    drawContext.setFillColor(color);\n    // loggerVer(`drawPoint ${x}_${y}, ${getColor(color)}`);\n    drawContext.fillRect(x - 1 / 15, y - 1 / 15, 3 / 15, 3 / 15);\n    drawContext.closePath();\n}\nfunction drawText(drawContext, str, exportType, color) {\n    if (color === void 0) { color = \"normal\"; }\n    var x = str.origin.x;\n    var y = str.origin.y;\n    drawContext.beginPath();\n    drawContext.setFillColor(color);\n    drawContext.fillText(str.label, x, y);\n    // loggerVer(`drawText ${x}_${y}, ${getColor(color)}`);\n    drawContext.closePath();\n}\n// function drawVertex(loop: Vertex) {\n//     const scale = config.scale\n//     context.beginPath()\n//     context.arc(loop.origin.x * scale,\n//         loop.origin.y * scale,\n//         loop.radius * scale, 0, Math.PI * 2)\n//     context.stroke()\n//     if (loop.fill) {\n//         context.fill()\n//     }\n//     if (loop.label) {\n//         let position = textPosition(loop.label, loop.origin, config)\n//         context.fillText(loop.label, position.x * scale, position.y * scale)\n//     }\n//     if (loop.labels) {\n//         loop.labels.forEach((lab) => {\n//             const diff = 0.5 + lab.diff\n//             let pos = loop.origin.add(new Vector(0, -1).multi(loop.radius + diff).rotation(lab.angle))\n//             let position = textPosition(lab.label, pos, config)\n//             context.fillText(lab.label, position.x * scale, position.y * scale)\n//         })\n//     }\n// }\n\n\n//# sourceURL=webpack://rdfeyn/./src/UI/draw.ts?");

/***/ }),

/***/ "./src/looger.ts":
/*!***********************!*\
  !*** ./src/looger.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loggerOn: () => (/* binding */ loggerOn),\n/* harmony export */   loggerVer: () => (/* binding */ loggerVer)\n/* harmony export */ });\n/* harmony import */ var _Config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Config */ \"./src/Config.ts\");\n\nfunction loggerVer(text) {\n    if (_Config__WEBPACK_IMPORTED_MODULE_0__.config.log == \"VER\") {\n        console.log(text);\n    }\n}\nfunction loggerOn(text) {\n    if (_Config__WEBPACK_IMPORTED_MODULE_0__.config.log == \"ON\" || _Config__WEBPACK_IMPORTED_MODULE_0__.config.log == \"VER\") {\n        console.log(text);\n    }\n}\n\n\n//# sourceURL=webpack://rdfeyn/./src/looger.ts?");

/***/ }),

/***/ "./src/quantumSketch.ts":
/*!******************************!*\
  !*** ./src/quantumSketch.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _sample_sample__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sample/sample */ \"./src/sample/sample.ts\");\n/* harmony import */ var _UI_DrawContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UI/DrawContext */ \"./src/UI/DrawContext.ts\");\n/* harmony import */ var _UI_RDDraw__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./UI/RDDraw */ \"./src/UI/RDDraw.ts\");\n// \"QuantumSketch  So Katagiri\"\n\n\n\nvar canvas = document.getElementById(\"canvas\");\nvar context_ = canvas.getContext(\"2d\");\nvar drawContext = new _UI_DrawContext__WEBPACK_IMPORTED_MODULE_1__.DrawContext(context_);\nvar h = new _UI_RDDraw__WEBPACK_IMPORTED_MODULE_2__.RDDraw(canvas, drawContext);\n// drawFourScalarVertex(drawContext)\n(0,_sample_sample__WEBPACK_IMPORTED_MODULE_0__.sample)(drawContext);\n\n\n//# sourceURL=webpack://rdfeyn/./src/quantumSketch.ts?");

/***/ }),

/***/ "./src/sample/sample.ts":
/*!******************************!*\
  !*** ./src/sample/sample.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clossLoop: () => (/* binding */ clossLoop),\n/* harmony export */   clossLoop3: () => (/* binding */ clossLoop3),\n/* harmony export */   draw2loop: () => (/* binding */ draw2loop),\n/* harmony export */   drawFourScalarVertex: () => (/* binding */ drawFourScalarVertex),\n/* harmony export */   sample: () => (/* binding */ sample)\n/* harmony export */ });\n/* harmony import */ var _Core_Group__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Core/Group */ \"./src/Core/Group.ts\");\n/* harmony import */ var _Core_Line__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Core/Line */ \"./src/Core/Line.ts\");\n/* harmony import */ var _Core_Loop__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Core/Loop */ \"./src/Core/Loop.ts\");\n/* harmony import */ var _Core_Vector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Core/Vector */ \"./src/Core/Vector.ts\");\n/* harmony import */ var _Core_Vertex__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Core/Vertex */ \"./src/Core/Vertex.ts\");\n/* harmony import */ var _UI_draw__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../UI/draw */ \"./src/UI/draw.ts\");\n/* harmony import */ var _UI_DrawContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../UI/DrawContext */ \"./src/UI/DrawContext.ts\");\n\n\n\n\n\n\n\nfunction getContext() {\n    var canvas = document.getElementById(\"canvas\");\n    var context_ = canvas.getContext(\"2d\");\n    var drawContext = new _UI_DrawContext__WEBPACK_IMPORTED_MODULE_6__.DrawContext(context_);\n    return drawContext;\n}\n/// example\nfunction drawFourVertex(context) {\n    var exLine1 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n    var exLine2 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n    var exLine3 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n    var exLine4 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n    var vertex = new _Core_Vertex__WEBPACK_IMPORTED_MODULE_4__.Vertex();\n    var elems = [exLine1, exLine2, exLine3, exLine4, vertex];\n    exLine1.label = \"k1\";\n    exLine2.label = \"k2\";\n    exLine3.label = \"k3\";\n    exLine4.label = \"k4\";\n    exLine1.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(2, 2);\n    exLine2.to = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(10, 2);\n    exLine3.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(2, 10);\n    exLine4.to = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(10, 10);\n    vertex.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(6, 6);\n    vertex.addLineTo(exLine1);\n    vertex.addLineTo(exLine3);\n    vertex.addLineOrigin(exLine2);\n    vertex.addLineOrigin(exLine4);\n    elems.forEach(function (x) {\n        (0,_UI_draw__WEBPACK_IMPORTED_MODULE_5__.draw)(context, x, \"canvas\");\n    });\n}\n/// example\nfunction draw2loop(context) {\n    var exLine1 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"k1\");\n    var exLine2 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"k2\");\n    var exLine3 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"k3\");\n    var exLine4 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"k4\");\n    var intLine = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"w\");\n    var loop = new _Core_Loop__WEBPACK_IMPORTED_MODULE_2__.Loop();\n    var loop2 = new _Core_Loop__WEBPACK_IMPORTED_MODULE_2__.Loop();\n    var elems = [exLine1, exLine2, exLine3, exLine4, loop, loop2, intLine];\n    exLine1.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(2, 2);\n    exLine2.to = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(14, 2);\n    exLine3.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(2, 10);\n    exLine4.to = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(14, 10);\n    loop.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(6, 6);\n    loop2.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(10, 6);\n    loop.labels = [\n        { label: \"p1\", angle: 0, diff: 0 },\n        { label: \"p2\", angle: Math.PI, diff: 0 },\n        { label: \"p3\", angle: (Math.PI * 3) / 2, diff: 0.3 },\n    ];\n    loop2.labels = [\n        { label: \"q1\", angle: 0, diff: 0 },\n        { label: \"q2\", angle: Math.PI / 2, diff: 0 },\n        { label: \"q3\", angle: Math.PI, diff: 0 },\n    ];\n    loop.addLineTo(exLine1);\n    loop2.addLineOrigin(exLine2);\n    loop.addLineTo(exLine3);\n    loop2.addLineOrigin(exLine4);\n    intLine.between(loop2, loop);\n    elems.forEach(function (x) {\n        (0,_UI_draw__WEBPACK_IMPORTED_MODULE_5__.draw)(context, x, \"canvas\");\n    });\n}\nfunction clossLoop3(drawContext) {\n    var v_Line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"\", \"normal\");\n    var n_Line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"\", \"dash\");\n    var boson_Line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"\", \"wave\");\n    var vertex = new _Core_Vertex__WEBPACK_IMPORTED_MODULE_4__.Vertex();\n    vertex.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(6, 6);\n    v_Line.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(0, 6);\n    n_Line.to = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(12, 6);\n    boson_Line.to = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(12, 0);\n    vertex.addLineTo(v_Line);\n    vertex.addLineOrigin(n_Line);\n    vertex.addLineOrigin(boson_Line);\n    var elems = [v_Line, n_Line, boson_Line, vertex];\n    elems.forEach(function (x) { return (0,_UI_draw__WEBPACK_IMPORTED_MODULE_5__.draw)(drawContext, x, \"canvas\"); });\n}\nfunction clossLoop(drawContext) {\n    var list = [];\n    var vertex_L = new _Core_Vertex__WEBPACK_IMPORTED_MODULE_4__.Vertex(\"\", new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(3, 6));\n    var vertex_I_L = new _Core_Vertex__WEBPACK_IMPORTED_MODULE_4__.Vertex(\"\", new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(6, 6));\n    var vertex_I_R = new _Core_Vertex__WEBPACK_IMPORTED_MODULE_4__.Vertex(\"\", new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(9, 6));\n    var vertex_R = new _Core_Vertex__WEBPACK_IMPORTED_MODULE_4__.Vertex(\"\", new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(12, 6));\n    list.push(vertex_L, vertex_I_L, vertex_I_L, vertex_I_R, vertex_R);\n    var v_L_Line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"\", \"normal\");\n    var v_R_Line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"\", \"normal\");\n    var v_C_Line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"\", \"normal\");\n    var n_1_Line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"\", \"dash\");\n    var n_2_Line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"\", \"dash\");\n    var boson_L_Line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"\", \"wave\");\n    var boson_R_Line = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"\", \"wave\");\n    list.push(v_L_Line, v_R_Line, v_C_Line, n_1_Line, n_2_Line, boson_L_Line, boson_R_Line);\n    v_L_Line.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(0, 6);\n    vertex_L.addLineTo(v_L_Line);\n    vertex_L.addLineOrigin(n_1_Line);\n    vertex_I_L.addLineTo(n_1_Line);\n    vertex_I_L.addLineOrigin(v_C_Line);\n    vertex_I_R.addLineTo(v_C_Line);\n    vertex_I_R.addLineOrigin(n_2_Line);\n    vertex_R.addLineTo(n_2_Line);\n    vertex_R.addLineOrigin(v_R_Line);\n    v_R_Line.to = vertex_R.origin.add(new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(3, 0));\n    var loop = new _Core_Loop__WEBPACK_IMPORTED_MODULE_2__.Loop();\n    loop.style = \"wave\";\n    loop.origin = v_C_Line.center();\n    loop.radius = v_C_Line.length() / 2 + v_L_Line.length();\n    loop.loopBeginAngle = 0;\n    loop.loopEndAngle = Math.PI;\n    list.push(loop);\n    vertex_I_L.addLineTo(boson_L_Line);\n    vertex_I_R.addLineOrigin(boson_R_Line);\n    boson_L_Line.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(0, 0);\n    boson_R_Line.to = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(16, 0);\n    return drawALl(drawContext, list);\n}\nfunction drawALl(drawContext, list) {\n    drawContext.setExportType(\"canvas\");\n    list.forEach(function (x) { return (0,_UI_draw__WEBPACK_IMPORTED_MODULE_5__.draw)(drawContext, x, \"canvas\"); });\n    drawContext.setExportType(\"svg\");\n    drawContext.startExport();\n    list.forEach(function (x) { return (0,_UI_draw__WEBPACK_IMPORTED_MODULE_5__.draw)(drawContext, x, \"svg\"); });\n    var result = drawContext.endExport();\n    console.log(result);\n    return result;\n}\n/// example\nfunction drawloop(n) {\n    var exLines = [];\n    for (var i = 0; i < 4; i++) {\n        exLines.push(new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line(\"k\" + i));\n    }\n}\n/// example\nfunction kakanzuTest(context) {\n    var loop00 = new _Core_Loop__WEBPACK_IMPORTED_MODULE_2__.Loop(\"A\");\n    var loop01 = new _Core_Loop__WEBPACK_IMPORTED_MODULE_2__.Loop(\"B\");\n    var loop10 = new _Core_Loop__WEBPACK_IMPORTED_MODULE_2__.Loop(\"C\");\n    var loop11 = new _Core_Loop__WEBPACK_IMPORTED_MODULE_2__.Loop(\"D\");\n    var line1 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n    var line2 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n    var line3 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n    var line4 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n    var elems = [loop00, loop01, loop10, loop11, line1, line2, line3, line4];\n    loop00.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(2, 2);\n    loop01.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(2, 10);\n    loop10.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(10, 2);\n    loop11.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(10, 10);\n    line1.between(loop00, loop01);\n    line2.between(loop01, loop11);\n    line3.between(loop00, loop10);\n    line4.between(loop10, loop11);\n    elems.forEach(function (x) {\n        (0,_UI_draw__WEBPACK_IMPORTED_MODULE_5__.draw)(context, x, \"canvas\");\n    });\n}\nvar V;\n(function (V) {\n    V.zero = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(0, 0);\n    V.one = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(1, 1);\n    V.up = function (num) { return new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(0, 1).multi(num); };\n    V.down = function (num) { return new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(0, -1).multi(num); };\n    V.left = function (num) { return new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(-1, 0).multi(num); };\n    V.right = function (num) { return new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(1, 0).multi(num); };\n    V.upLeft = function (num) { return new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(-1, 1).multi(num); };\n    V.upRight = function (num) { return new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(1, 1).multi(num); };\n    V.downLeft = function (num) { return new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(-1, -1).multi(num); };\n    V.downRight = function (num) { return new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(1, -1).multi(num); };\n})(V || (V = {}));\nfunction drawFourScalarVertex(context) {\n    var vertex = new _Core_Vertex__WEBPACK_IMPORTED_MODULE_4__.Vertex();\n    var line1 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n    var line2 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n    var line3 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n    var line4 = new _Core_Line__WEBPACK_IMPORTED_MODULE_1__.Line();\n    var elems = [vertex, line1, line2, line3, line4];\n    vertex.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(6, 6);\n    line1.origin = vertex.origin.add(V.upLeft(3));\n    line2.origin = vertex.origin.add(V.upRight(3));\n    line3.origin = vertex.origin.add(V.downLeft(3));\n    line4.origin = vertex.origin.add(V.downRight(3));\n    line1.to = vertex.origin;\n    line2.to = vertex.origin;\n    line3.to = vertex.origin;\n    line4.to = vertex.origin;\n    elems.forEach(function (x) {\n        (0,_UI_draw__WEBPACK_IMPORTED_MODULE_5__.draw)(context, x, \"canvas\");\n    });\n}\n// const context = getContext()\n// draw2loop()\n/**\n * ループの任意の角度から任意の角度までの線を引く\n */\nfunction loopInLoop() {\n    var loop1 = new _Core_Loop__WEBPACK_IMPORTED_MODULE_2__.Loop();\n    loop1.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(9, 6);\n    loop1.setLoopBeginAngle(2 * Math.PI / 3);\n    loop1.setLoopEndAngle(4 * Math.PI / 3);\n    loop1.radius = 4;\n    var loop2 = new _Core_Loop__WEBPACK_IMPORTED_MODULE_2__.Loop();\n    loop2.origin = new _Core_Vector__WEBPACK_IMPORTED_MODULE_3__.Vector(5, 6);\n    loop2.radius = 4;\n    var group = new _Core_Group__WEBPACK_IMPORTED_MODULE_0__.Group([loop1, loop2]);\n    return group;\n}\nfunction sample(context) {\n    drawALl(context, [loopInLoop()]);\n}\n\n\n//# sourceURL=webpack://rdfeyn/./src/sample/sample.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/quantumSketch.ts");
/******/ 	
/******/ })()
;